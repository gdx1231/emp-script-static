define("ace/ext/code_lens",["require","exports","module","ace/line_widgets","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/editor","ace/config"],function(e,c,n){"use strict";var i=e("../line_widgets").LineWidgets;var r=e("../lib/event");var t=e("../lib/lang");var w=e("../lib/dom");function x(e){var n=e.$textLayer;var r=n.$lenses;if(r)r.forEach(function(e){e.remove()});n.$lenses=null}function o(e,n){var r=e&n.CHANGE_LINES||e&n.CHANGE_FULL||e&n.CHANGE_SCROLL||e&n.CHANGE_TEXT;if(!r)return;var t=n.session;var i=n.session.lineWidgets;var o=n.$textLayer;var a=o.$lenses;if(!i){if(a)x(n);return}var s=n.$textLayer.$lines.cells;var d=n.layerConfig;var c=n.$padding;if(!a)a=o.$lenses=[];var l=0;for(var f=0;f<s.length;f++){var u=s[f].row;var v=i[u];var g=v&&v.lenses;if(!g||!g.length)continue;var L=a[l];if(!L){L=a[l]=w.buildDom(["div",{class:"ace_codeLens"}],n.container)}L.style.height=d.lineHeight+"px";l++;for(var p=0;p<g.length;p++){var h=L.childNodes[2*p];if(!h){if(p!=0)L.appendChild(w.createTextNode(" | "));h=w.buildDom(["a"],L)}h.textContent=g[p].title;h.lensCommand=g[p]}while(L.childNodes.length>2*p-1)L.lastChild.remove();var m=n.$cursorLayer.getPixelPosition({row:u,column:0},true).top-d.lineHeight*v.rowsAbove-d.offset;L.style.top=m+"px";var $=n.gutterWidth;var C=t.getLine(u).search(/\S|$/);if(C==-1)C=0;$+=C*d.characterWidth;$-=n.scrollLeft;L.style.paddingLeft=c+$+"px"}while(l<a.length)a.pop().remove()}function a(e){if(!e.lineWidgets)return;var n=e.widgetManager;e.lineWidgets.forEach(function(e){if(e&&e.lenses)n.removeLineWidget(e)})}c.setLenses=function(i,e){var o=Number.MAX_VALUE;a(i);e&&e.forEach(function(e){var n=e.start.row;var r=e.start.column;var t=i.lineWidgets&&i.lineWidgets[n];if(!t||!t.lenses){t=i.widgetManager.$registerLineWidget({rowCount:1,rowsAbove:1,row:n,column:r,lenses:[]})}t.lenses.push(e.command);if(n<o)o=n});i._emit("changeFold",{data:{start:{row:o}}})};function s(d){d.codeLensProviders=[];d.renderer.on("afterRender",o);if(!d.$codeLensClickHandler){d.$codeLensClickHandler=function(e){var n=e.target.lensCommand;if(n)d.execCommand(n.id,n.arguments)};r.addListener(d.container,"click",d.$codeLensClickHandler,d)}d.$updateLenses=function(){var a=d.session;if(!a)return;if(!a.widgetManager){a.widgetManager=new i(a);a.widgetManager.attach(d)}var r=d.codeLensProviders.length;var s=[];d.codeLensProviders.forEach(function(e){e.provideCodeLenses(a,function(e,n){if(e)return;n.forEach(function(e){s.push(e)});r--;if(r==0){t()}})});function t(){var e=a.selection.cursor;var n=a.documentToScreenRow(e);c.setLenses(a,s);var r=a.$undoManager&&a.$undoManager.$lastDelta;if(r&&r.action=="remove"&&r.lines.length>1)return;var t=a.documentToScreenRow(e);var i=d.renderer.layerConfig.lineHeight;var o=a.getScrollTop()+(t-n)*i;a.setScrollTop(o)}};var e=t.delayedCall(d.$updateLenses);d.$updateLensesOnInput=function(){e.delay(250)};d.on("input",d.$updateLensesOnInput)}function d(e){e.off("input",e.$updateLensesOnInput);e.renderer.off("afterRender",o);if(e.$codeLensClickHandler)e.container.removeEventListener("click",e.$codeLensClickHandler)}c.registerCodeLensProvider=function(e,n){e.setOption("enableCodeLens",true);e.codeLensProviders.push(n);e.$updateLensesOnInput()};c.clear=function(e){c.setLenses(e,null)};var l=e("../editor").Editor;e("../config").defineOptions(l.prototype,"editor",{enableCodeLens:{set:function(e){if(e){s(this)}else{d(this)}}}});w.importCssString(".ace_codeLens {    position: absolute;    color: #aaa;    font-size: 88%;    background: inherit;    width: 100%;    display: flex;    align-items: flex-end;    pointer-events: none;}.ace_codeLens > a {    cursor: pointer;    pointer-events: auto;}.ace_codeLens > a:hover {    color: #0000ff;    text-decoration: underline;}.ace_dark > .ace_codeLens > a:hover {    color: #4e94ce;}","")});(function(){window.require(["ace/ext/code_lens"],function(e){if(typeof module=="object"&&typeof exports=="object"&&module){module.exports=e}})})();