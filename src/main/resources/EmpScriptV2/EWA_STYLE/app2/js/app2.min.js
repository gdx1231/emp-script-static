var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};
$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var e=d.length,f=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var g=0;g<f&&c<e;)if(d[c++]!=b[g++])return!1;return g>=f}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(b,c){var d=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===c&&(c=d.length);c=Math.max(0,Math.min(c|0,d.length));for(var e=b.length;0<e&&0<c;)if(d[--c]!=b[--e])return!1;return 0>=e}},"es6","es3");
var EWA_AppAutoLoginClass=function(a,b,c,d){this.name=a;this.loginUrl=b;this.loginSucess=c;this.loginFail=d;this.lastLoginTime=0;this.autoLogin=function(e){var f=this.getCode();if(!f)return!1;f={code:f,method:"auto_login"};var g=this.loginUrl;if(!g)return console.log("\u6ca1\u6709\u5b9a\u4e49\u81ea\u52a8\u767b\u5f55\u7684url"),!1;var h=this;$JP1(g,f,function(k){h.lastLoginTime=(new Date).getTime();console.log(k);k.RST?(g_is_user_logined=!0,k.CODE&&h.saveCode(k.CODE),h.loginSucess&&h.loginSucess(k)):
(h.removeCode(),h.loginFail&&h.loginFail(k));e&&e(k)});return!0};this.getPastMinutes=function(){return((new Date).getTime()-this.lastLoginTime)/1E3/60};this.getCode=function(){try{return window.localStorage[this.name]}catch(e){console.log(e)}};this.saveCode=function(e){window.localStorage[this.name]=e};this.removeCode=function(){window.localStorage.removeItem(this.name)}},EWA_App={IS_STOP_TOUCH_MOVE:!0,EWA_ROOT:"ewa.jsp",CFGS:null,CFGS_CURRENT:null,IS_IN_WEIXIN:/micromessenger/ig.test(navigator.userAgent),
IS_IN_WEIXIN_MINI:/miniprogram/ig.test(navigator.userAgent),IS_IN_ANDROID:/android/ig.test(navigator.userAgent),IS_IN_IPHONE:/iphone/ig.test(navigator.userAgent),initCfgs:function(a){var b={},c;for(c in a){var d=a[c],e=d.ID;d=this.convertCfg(d);b[e]=d}this.CFGS={INIT:b};__SECTIONS=this.CFGS_CURRENT=b},attatchCfgs:function(a,b){var c={},d;for(d in b){var e=b[d],f=e.ID;e=this.convertCfg(e);c[f]=e;this.CFGS_CURRENT[f]=e}this.CFGS[a]=c;__SECTIONS=this.CFGS_CURRENT},changeCfgs:function(a){a||(a="INIT");
this.CFGS[a]?__SECTIONS=this.CFGS_CURRENT=this.CFGS[a]:alert(a+"\u7684\u914d\u7f6e\u4fe1\u606f\u4e0d\u5b58\u5728")},convertCfg:function(a){var b={IScroll:1,PageFooter:1,PageHeader:1,Refresh:1,ButtonOnFooter:1,EWA:1,IScrollMore:1},c={Installed:1,Losted:1,RefreshAfter:1,ShowCompleted:1},d={},e;for(e in a){var f=a[e];null!=f&&"string"==typeof f&&(f=f.trim());if(f)if(b[e])d[e]="Y"==f?!0:!1;else if(c[e])try{eval("window.______js="+f),d[e]=window.______js,delete window.______js}catch(g){console.log(g),
console.log(a),console.log(f)}else d[e]=f}return d},log:function(){var a={},b;for(b in arguments){var c=arguments[b];try{var d=JSON.stringify(c)}catch(e){d=e}a["log"+b]=d}$JP2("console.jsp",a,function(){})},changeBodyHeight:function(a,b,c){a||(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight);EWA_App.DEBUG&&console.log("changeBodyHeight",a,b,c);$("body").css("height",b).css("width",a);$("section").css("width",a+"px").attr("aw",a);a>b?$("body").addClass("landscape"):$("body").removeClass("landscape")},
start:function(a){if(a)if(__SECTIONS[a]){this.FirstId=a;window.addEventListener("orientationchange",function(e){setTimeout(function(){var f;EWA_App.DEBUG&&console.log("orientation:"+window.orientation);var g=document.documentElement.clientHeight;(f=document.documentElement.clientWidth)&&g&&EWA_App.changeBodyHeight(f,g,"\u5ef6\u65f61")},501)});this._clientHeight=document.documentElement.clientHeight;var b=this;window.setInterval(function(){var e=document.documentElement.clientHeight;b._clientHeight!=
e&&(b._clientHeight=e,console.log("\u9ad8\u5ea6\u53d8\u5316\u4e86\uff1a"+e),EWA_App.changeBodyHeight())},1E3);EWA_App.changeBodyHeight();EWA_App.State.init("home");EWA_App.State._is_replace=!0;a="";var c=window.location.href.split("#"),d=c[0];this.ENTRY_URL=d;1<c.length&&(a=c[1],a==this.FirstId&&(a=null));EWA_App.Section.createIScroll($("section#"+this.FirstId)[0],__SECTIONS[this.FirstId]);EWA_App.State.state(__SECTIONS[this.FirstId].Title,d+"#"+this.FirstId);a&&(EWA_App.DEBUG&&console.log("other_id",
a),EWA_App.State.state("",d+"#"+a));EWA_App.startAfter&&EWA_App.startAfter()}else alert(" fristId\u300a\u7b2c\u4e00\u4e2a\u9875\u9762id\u300b\u5bf9\u5e94\u914d\u7f6e\u9879\u4e0d\u5b58\u5728__SECTIONS."+a);else $Tip("\u8bf7\u5b9a\u4e49 fristId\u300a\u7b2c\u4e00\u4e2a\u9875\u9762id\u300b")},SplitEwa:function(a,b,c){a=EWA.F.FOS[a];var d=a.Url,e=new EWA_UrlClass;e.SetUrl(d);e.AddParameter("xmlname",b);e.AddParameter("itemname",c);a.Url=e.GetUrl()},back:function(a){if(a){var b=$(a).attr("t")||0,c=(new Date).getTime();
if(300>c-b)return;$(a).attr("t",c)}var d;EWA_App.SECTION_SHOW&&(d=__SECTIONS[EWA_App.SECTION_SHOW.id]);d&&d.backBeforeEvent&&d.backBeforeEvent();this.backAction=!0;window.history.back();d&&d.backAfterEvent&&d.backAfterEvent()}};
(function(){EWA_App.Ani={DEF_CSS:{INIT:{"-webkit-transform":"translate3d(90%,0,0)"},INIT_BACK:{"-webkit-transform":"translate3d(-90%,0,0)"},HIDE:{"-webkit-transform":"translate3d(-100%, 0, 0)","-webkit-transition":"-webkit-transform 400ms cubic-bezier(0.42, 0, 0.58, 1.0) 0.1s"},SHOW:{"-webkit-transform":"translate3d(0, 0, 0)","-webkit-transition":"-webkit-transform 350ms cubic-bezier(0.42, 0, 0.58, 1.0)"},BACK_HIDE:{"-webkit-transform":"translate3d(100%, 0px, 0px)","-webkit-transition":"-webkit-transform 350ms cubic-bezier(0.42, 0, 0.58, 1.0) 0.1s"},
BACK_SHOW:{"-webkit-transform":"translate3d(0%, 0px, 0px)","-webkit-transition":"-webkit-transform 400ms cubic-bezier(0.42, 0, 0.58, 1.0)"}},POP_CSS:{INIT:{"-webkit-transform":"translate3d(0, 90%, 0)"},INIT_BACK:{"-webkit-transform":"translate3d(0, 0, 0)"},HIDE:{"-webkit-transform":"translate3d(0, 0%, 0)"},SHOW:{"-webkit-transform":"translate3d(0, 0%, 0)","-webkit-transition":"-webkit-transform 350ms cubic-bezier(0.42, 0, 0.58, 1.0)"},BACK_HIDE:{"-webkit-transform":"translate3d(0, 100%, 0px)","-webkit-transition":"-webkit-transform 350ms cubic-bezier(0.42, 0, 0.58, 1.0) 0.1s"},
BACK_SHOW:{"-webkit-transform":"translate3d(0%, 0px, 0px)"}},getCss:function(a){EWA_App.DEBUG&&console.log(a);return"pop"==a?this.POP_CSS:this.DEF_CSS}}})();
EWA_App.LocalStore={name:"EX_APP",getJson:function(){if(this.CFG)return this.CFG;if(window.localStorage[this.name]){var a=window.localStorage[this.name];try{this.CFG=JSON.parse(a)}catch(b){this.CFG={}}}else this.CFG={};return this.CFG},selectCitys:function(){var a=this.getJson();return a.selectCitys?a.selectCitys:[]},addDefaultCity:function(a,b){var c=this.selectCitys();b=[{id:a,text:b}];for(var d=0;d<c.length&&!(10<=b.length);d++){var e=c[d];e.id!=a&&b.push(e)}this.CFG.selectCitys=b;this.save()},
save:function(){window.localStorage[this.name]=JSON.stringify(this.CFG)},addRz:function(a,b){this.getJson().rz={uid:a,code:b};this.save()},loadRz:function(){return this.getJson().rz||{}},removeRz:function(){delete this.getJson().rz;this.save()}};
EWA_App.MonitorRefresh={list:[],add:function(a,b){var c={};c.obj=a;c.h=$(a).height();c.w=$(a).width();c.f=b;this.list.push(c);1==this.list.length&&this.start()},start:function(){var a=this;this.timerHandle=setInterval(function(){a._check()},15)},stop:function(){window.clearInterval(this.timerHandle)},_check:function(){for(var a in this.list){var b=this.list[a];null!=b&&$("section#"+b)}}};
EWA_App.MonitorResize={list:[],add:function(a,b){var c={};c.obj=a;c.h=$(a).height();c.w=$(a).width();c.f=b;this.list.push(c);1==this.list.length&&this.start()},start:function(){this.timerHandle=setInterval(function(){EWA_App.MonitorResize._check()},15)},stop:function(){window.clearInterval(this.timerHandle)},_check:function(){var a=(new Date).getTime(),b;for(b in this.list){var c=this.list[b];if(null!=c){if(!document.contains(c.obj)){c.obj=null;this.list[b]=null;break}var d=$(c.obj).width(),e=$(c.obj).height();
if(d!=c.w||e!=c.h)c.ow=c.w,c.oh=c.h,c.w=d,c.h=e,c.f&&c.f(c,a)}}}};
EWA_App.PicsViewer={IPHONE:navigator.userAgent.toLowerCase().match(/cpu iphone os (\d+)_(\d+) like/),IS_DEBUG:!1,IS_IN_IOS_NATIVE_APP:0<navigator.userAgent.toLowerCase().indexOf("/classroom"),IS_IN_WEIXIN:0<navigator.userAgent.toLowerCase().indexOf("micromessenger"),IS_MINIPROGRAM:0<navigator.userAgent.toLowerCase().indexOf("miniprogram"),collect:function(){this.FILE_META?this.collectCallback?this.collectCallback(this.FILE_META):console.warn("collectCallback: "+this.FILE_META):alert("\u6ca1\u6709\u6587\u4ef6\u53ef\u4ee5\u6536\u85cf")},
timeline:function(){this.FILE_META?this.shareToWeiXin(this.FILE_META,"timeline"):alert("\u6ca1\u6709\u6587\u4ef6\u53ef\u4ee5\u5206\u4eab")},re:function(){this.FILE_META?this.shareToWeiXin(this.FILE_META,"session"):alert("\u6ca1\u6709\u6587\u4ef6\u53ef\u4ee5\u8f6c\u53d1")},share:function(){if(this.FILE_META){var a=this.BOX.find("tr.ewa-lf-data-row")[0];EWA_App.Section.showLfMenus(a,"EWA_App.PicsViewer.Share")}else alert("\u6ca1\u6709\u6587\u4ef6\u53ef\u4ee5\u5206\u4eab")},shareToWeiXin:function(a,
b){var c=location.protocol+"//"+location.host+(location.port?":"+location.port:""),d=window.location.pathname.substring(0,location.pathname.lastIndexOf("/"))+"/";if(this.IS_IN_IOS_NATIVE_APP)if("pic"==a.CMD){var e=c+(a.URL.startsWith("/")?"":d)+a.URL;e=0<e.indexOf("?")?e+"&DOWNLOAD=1":e+"?DOWNLOAD=1";this.shareToWxCommand(b,"pic",null,null,null,e,null)}else e=c+(a.DOWNLOAD_URL.startsWith("/")?"":d)+a.DOWNLOAD_URL,c=c+(a.ICON.startsWith("/")?"":d)+a.ICON,this.shareToWxCommand(b,"link",a.NAME,a.DES,
e,null,c);else this.IS_IN_WEIXIN?(this.FILE_META=a,"session"==b?this.createWx_onMenuShareAppMessage():this.createWx_onMenuShareTimeline()):$Tip("\u53ea\u80fd\u5728\u5fae\u4fe1\u516c\u4f17\u53f7\u548cApp\u4e0b\u8fdb\u884c\u64cd\u4f5c")},shareToWxCommand:function(a,b,c,d,e,f,g){var h=(new Date).getTime();1E3>h-(this.asldfskfsldfksdlfksldkfsldjdfnkvndfkj||0)||(this.asldfskfsldfksdlfksldkfsldjdfnkvndfkj=h,h=[],h.push("cmd="+b),c&&h.push("title="+c.toURL()),d&&h.push("description="+d.toURL()),g&&h.push("icon="+
g.toURL()),e&&h.push("url="+e.toURL()),f&&h.push("dataUrl="+f.toURL()),b=h.join("&"),a="gdx://weixinshare/"+a+"?"+b,$("#asdadsadas").text(a),loadNativeURL(a))},showFile:function(a){this._init();if(a){this.FILE_URL=a;$("#bbs-pic-view-file").html("<div style='text-align: center'>\u8bf7\u7b49\u5f85\u52a0\u8f7d\u6587\u4ef6...</div>");window.FILE_META=null;var b=this;$Install(a,"bbs-pic-view-file",function(){window.FILE_META&&(b.FILE_META=window.FILE_META,b.createWx_onMenuShareAppMessage(),b.createWx_onMenuShareTimeline(),
window.FILE_META=null)});this.BOX.find("#page").hide();this.BOX.find("#page1").hide();this.BOX.show()}},createWx_onMenuShareTimeline:function(){if(window.wx&&wx.onMenuShareAppMessage){var a=location.protocol+"//"+location.hostname;location.port&&(a+=":"+location.port);wx.onMenuShareTimeline({title:this.FILE_META.NAME,link:a+this.FILE_META.DOWNLOAD_URL,imgUrl:a+this.FILE_META.ICON,success:function(){},cancel:function(){}})}},createWx_onMenuShareAppMessage:function(){if(window.wx&&wx.onMenuShareAppMessage){var a=
location.protocol+"//"+location.hostname;location.port&&(a+=":"+location.port);wx.onMenuShareAppMessage({title:this.FILE_META.NAME,desc:this.FILE_META.DES,link:a+this.FILE_META.DOWNLOAD_URL,imgUrl:a+this.FILE_META.ICON,type:"",dataUrl:"",success:function(){},cancel:function(){}})}},showPics:function(a,b){this._init();if(a){this.FILE_URL=a;this.FILE_META={CMD:"pic",URL:a};$("#bbs-pic-view-file").html("");this.BOX.find("#page").show();var c=[],d=[],e=1;b=b?b:0;0>b&&(b=0);if(a instanceof Array){if(0==
a.length)return;e=a.length;b>e-1&&(b=e-1);for(var f in a){c.push(this._createImg(f,a[f],b));if(f==b){var g="<b id='idx_"+f+"' class='cur' >&bull; </b>";this.FILE_META.URL=a[f]}else g="<b id='idx_"+f+"'>&bull; </b>";d.push(g)}}else c.push(this._createImg(0,a,b));this.BOX.find("#page tr").html(c.join(""));1==e?this.BOX.find("#page1").hide():(this.BOX.find("#page1").show(),this.BOX.find("#page1 td").html(d.join("")));this.BOX.show()}},hide:function(){this.BOX.hide()},_createImg:function(a,b,c){c=c?c:
0;var d=["<td class='list0' [SSTT] align=\"center\"><img class='imga' onload='EWA_App.PicsViewer._setImg(this)' "];d.push(" id='img_"+a+"' ");a==c?d.push(' src="'+b+'" '):d.push(' src1="'+b+'" ');d.push("></td>");b=d.join("");return b=b.replace("[SSTT]",a==c?"":"style='display:none' ")},_setImg:function(a){$(a).attr("mw",a.width).attr("mh",a.height).css("width",a.width).css("height",a.height).css("margin-left",0).css("margin-top","0");$(a).removeClass("imga")},_changePhoto:function(a){var b=this.BOX.find("#img_"+
a);if(b.attr("src1"))b.attr("src",b.attr("src1")),b.attr("scr1",""),b[0].setAttribute("src1","");else try{if(b.attr("mw")){var c=1*b.attr("mw");b.attr("mh");b.css("width",c).css("height".mh).css("margin-left",0).css("margin-top",0)}}catch(d){console.log(d)}b.parent().show();this.BOX.find("#idx_"+a).addClass("cur")},_init:function(){if(this.BOX)return this.BOX;var a=[];a.push('<div id="bbs-pic-view-box" style="display:none">');a.push('<div id="bbs-pic-view-box1">');a.push("<div id='bbs-pic-view-file' style='height:100%;'></div>");
a.push('<div class="view-large-image">');a.push('<table id="page" class="page " cellspacing="0" cellpadding="0">');a.push("<tr id='bbs-pic-view-box-page-imgs'>");a.push("\x3c!-- imgs --\x3e");a.push("</tr>");a.push("</table>");a.push('<table id="page1" style="display: none">');a.push("<tr>");a.push('<td height="30" align="center" id=\'page1-indexes\'></td>');a.push("</tr>");a.push("</table>");a.push("</div>");a.push("</div>");a.push("<a href='javascript:EWA_App.PicsViewer.hide();' class=\"fa fa-close close\"></a>");
a.push("<a href='javascript:EWA_App.PicsViewer.share();' class='bbs-pic-view-share fa fa-share-alt'></a>");a.push("<table><tr class='ewa-lf-data-row'><td><input id='session' type=button onclick='EWA_App.PicsViewer.re()' value='\u8f6c\u53d1\u7ed9\u670b\u53cb'><input id='timeline' type=button onclick='EWA_App.PicsViewer.timeline()' value='\u5206\u4eab\u670b\u53cb\u5708'></td></tr></table>");a.push("</div>");a=$(a.join(""));$("body").append(a);this.BOX=a;a=a.find("#page")[0];var b=this;a.ontouchstart=
function(c){1==c.targetTouches.length?b.t_start=c:2==c.targetTouches.length&&(b.t_start1=c,b.dist_base=0);b.is_move=!1;c.preventDefault();c.stopPropagation()};a.ontouchmove=function(c){if(2==c.targetTouches.length){b.t_start1a=c;var d=c.targetTouches[0].pageX-b.t_start1.pageX,e=c.targetTouches[0].pageY-b.t_start1.pageY,f=c.targetTouches[1].pageX-b.t_start1.pageX,g=c.targetTouches[1].pageY-b.t_start1.pageY;e=Math.sqrt((d-f)*(d-f)+(e-g)*(e-g));if(0!=b.dist_base){d=e/b.dist_base;f=1*$(c.target).attr("mw");
g=1*$(c.target).attr("mh");var h=$(c.target).width(),k=$(c.target).height();h*=d;k*=d;h<f&&(h=f,k=g,d=0);$(c.target).css("width",h).css("height",k).attr("r",d);0==d&&$(c.target).css("margin-left",0).css("margin-top","0")}b.dist_base=e}else if(1==c.targetTouches.length){d=$(c.target).attr("r");if(null==d||0==d)return;b.t_start||(b.t_start=c);d=c.pageX-b.t_start.pageX;e=c.pageY-b.t_start.pageY;g=1*$(c.target).css("margin-left").replace("px","");f=1*$(c.target).css("margin-top").replace("px","");d=g+
d;e=f+e;$(c.target).css("margin-left",d).css("margin-top",e);b.t_start=c;b.is_move=!0}c.preventDefault();c.stopPropagation()};a.ontouchend=function(c){c.preventDefault();c.stopPropagation();if(b.t_start){var d=c.pageX-b.t_start.pageX;c=c.timeStamp-b.t_start.timeStamp;-50>d&&244>c?(d=b.BOX.find(".cur"),c=d.attr("id"),c=1*c.replace("idx_",""),d.removeClass("cur"),b.BOX.find("#img_"+c).parent().hide(),d=b.BOX.find(".page img"),c++,c==d.length&&(c=0),b._changePhoto(c)):50<d&&244>c&&(d=b.BOX.find(".cur"),
c=d.attr("id"),c=1*c.replace("idx_",""),d.removeClass("cur"),b.BOX.find("#img_"+c).parent().hide(),d=b.BOX.find(".page img"),c--,0>c&&(c=d.length-1),b._changePhoto(c))}b.t_start=null;b.t_start1=null}}};
EWA_App.Section={IS_WEIXIN:0<navigator.appVersion.toLowerCase().indexOf("micromessenger"),handleState:function(a){if(null!=a){var b=a.url;b&&(b=this.getParas(b),b.section_id&&this.cover(EWA_App.State.prevShow,$("section[id="+b.section_id+"]")[0],b,a._is_back))}},getParas:function(a){var b=a.split("#"),c={};if(1==b.length)return{url:a};c.url=b[0];a=b[1].split("?");c.section_id=a[0];if(2==a.length){a=a[1].split("&");b={};for(var d in a){var e=a[d].split("=");2==e.length&&(b[e[0].unURL()]=e[1].unURL())}c.paras=
b}this.createSection(c);return c},createSection:function(a){a=a.section_id;var b=__SECTIONS[a];b&&b.swap&&"pop"==b.swap.toLowerCase().trim()&&$("section[id="+a+"]").remove();if(0==$("section[id="+a+"]").length)if(b=__SECTIONS[a],null==b)console.log(a+" not defined");else{var c=b.Css?b.Css:"";"Y"==b.USE_EWA_LF&&(c+=" ewa-app-use-ewa-lf");"pop"==b.swap&&(c+=" ewa-app-pop");c=['<section style="display1:none" class="'+c.trim()+'" id="'+a+'">'];EWA_App.IS_IN_WEIXIN&&!EWA_App.IS_IN_WEIXIN_MINI&&(b.PageHeader=
!1);b.PageHeader&&b.PageFooter?c.push("<header><h1></h1></header><div class='content'></div><footer></footer>"):b.PageHeader&&!b.PageFooter?c.push("<header><h1></h1></header><div class='content'></div>"):!b.PageHeader&&b.PageFooter?c.push("<div class='content'></div><footer></footer>"):c.push('<div class="content"></div>');c.push("<div class='ewa-app-btn ewa-app-btn-back' onclick='EWA_App.back();'></div>");c.push("<div class='ewa-app-btn ewa-app-btn-add'><a></a></div>");c.push("<div class='ewa-app-btn ewa-app-btn-more'><a></a></div>");
c.push("</section>");$("body").append(c.join(""));"init"==b.Footer?(a=$("section[id="+a+"] footer"),a.html($("section:eq(1) footer").html()),a.find("a").removeAttr("ckjs")):b.Footer&&(b=$('section[id="'+b.Footer+'"] footer'),1==b.length&&(a=$("section[id="+a+"] footer"),a.html(b.html()),a.find("a").removeAttr("ckjs")))}},_getRequestUrl:function(a,b){var c=EWA_App.CFGS_CURRENT.ewa;0==a.ID.indexOf("ewa")?EWA_App.SECTION_HIDE&&(a.CONTENT_PATH=EWA_App.CFGS_CURRENT[EWA_App.SECTION_HIDE.id].CONTENT_PATH):
a.CONTENT_PATH?(EWA_App.EWA_ROOT_INIT||(EWA_App.EWA_ROOT_INIT=EWA_App.EWA_ROOT,EWA.CP=a.CONTENT_PATH+"../"),EWA_App.EWA_ROOT=a.CONTENT_PATH+EWA_App.EWA_ROOT_INIT,c.CONTENT_PATH||(c.CONTENT_PATH=a.CONTENT_PATH,c.CONTENT_PATH_CHANGED=!0)):EWA_App.EWA_ROOT_INIT&&(EWA_App.EWA_ROOT=EWA_App.EWA_ROOT_INIT,EWA_App.EWA_ROOT_INIT=null,EWA.CP_INIT=null,c.CONTENT_PATH_CHANGED&&(c.CONTENT_PATH=null,c.CONTENT_PATH_CHANGED=null));if(a.EWA){c=a.X instanceof Array?a.X.join(","):a.X;var d=a.I instanceof Array?a.I.join(","):
a.I;d=EWA_App.EWA_ROOT+"?add_div=1&xmlname="+c+"&itemname="+d+"&EWA_APP=1"}else d=a.U,!a.CONTENT_PATH||d.startsWith("/")||d.startsWith("http")||(d=a.CONTENT_PATH+d);c=new EWA_UrlClass;c.SetUrl(d);d=new EWA_UrlClass;for(var e in d._Paras)c.AddParameter(e,d._Paras[e]);if(a.AddParas)for(e in a.AddParas)c.AddParameter(e,a.AddParas[e]);if(a._paras)for(e in a._paras)c.AddParameter(e,a._paras[e]);!c.GetParameter("EWA_LANG")&&EWA.LANG&&c.AddParameter("EWA_LANG",EWA.LANG);d=c.AddParameter("section",b);EWA_App.DEBUG&&
console.log(d);return d},getEWAS:function(){var a=[];$(EWA_App.SECTION_SHOW).find(".EWA_TABLE").each(function(){var b=$(this).attr("id");b&&(b=b.replace("EWA_FRAME_","").replace("EWA_LF_",""),(b=EWA.F.FOS[b])&&a.push(b))});return a},loadMore:function(a){var b=$(EWA_App.SECTION_SHOW).attr("id"),c=__SECTIONS[b];if(!c._is_reloadding){c._is_reloadding=!0;EWA_App.DEBUG&&console.log("reload more id ="+b);c.loaded=!0;b=c._ewa_load_more_obj;if(null==b||0==b.parent().length||0==b.parent().parent().length){b=
$(EWA_App.SECTION_SHOW).find(".ewa-lf-frame[id]");0==b.length&&(is_lf_call=!1,b=$(EWA_App.SECTION_SHOW).find(".ewa-grid-frame[id]"));if(0==b.length){console.log("loadMore ewa_obj ? (listframe or grid)");return}if(1<b.length)for(var d=0;d<b.length;d++){var e=b[d];if(""!=e.id){b=$(e);break}}EWA_App.DEBUG&&console.log(b[0]);c._ewa_load_more_obj=b}d=b.attr("id");d=d.replace("EWA_LF_","");var f=EWA.F.FOS[d];if(f)if(b=b.parent(),f._PageCurrent++,f._PageCurrent>f._PageCount)f._PageCurrent--,c._is_reloadding=
!1,b=!0,c.noMoreData?b=c.noMoreData():a||$Tip("\u6ca1\u6709\u66f4\u591a\u7684\u6570\u636e"),b&&($(c.myScroll.wrapper).removeClass("loadingmore"),$(c.myScroll.scroller).removeClass("loadingmore-scroller").css("margin-top",""));else{a=EWA_Utils.tempId("_sc_");b.append('<div id="'+a+'"></div>');b=new EWA_UrlClass(f.Url);b.AddParameter("EWA_PAGECUR",f._PageCurrent);b.AddParameter("EWA_PAGESIZE",f._PageSize);b.AddParameter("EWA_AJAX","LF_RELOAD");b.AddParameter("EWA_IS_SPLIT_PAGE","no");b.AddParameter("EWA_IS_HIDDEN_CAPTION",
"yes");(d=f.SearchGetExp(EWA_App.SECTION_SHOW))&&b.AddParameter("EWA_LF_SEARCH",d);f._Sort&&b.AddParameter("EWA_LF_ORDER",f._Sort);b=b.GetUrl();var g=this;(new EWA_AjaxClass).Install(b,"",a,function(){c._is_reloadding=!1;f.ReloadAfter&&f.ReloadAfter();c.myScroll&&c.myScroll.refresh();g.listFrameUIAndEvents(f)},!0)}else console.log("ewa["+d+"] ?"),c._is_reloadding=!1}},reload:function(){var a=$(EWA_App.SECTION_SHOW);if(0!=a.length){var b=a.attr("id"),c=__SECTIONS[b];if(!c._is_reloadding){c._is_reloadding=
!0;EWA_App.DEBUG&&console.log("reload id ="+b);c.myScroll&&$(c.myScroll.wrapper).addClass("reloading");c.loaded=!0;var d=a.find(".content");d.attr("id")||d.attr("id",EWA_Utils.tempId("_sc_"));var e=this;b=$(EWA_App.SECTION_SHOW).find(".ewa-lf-frame[id]");0==b.length&&(is_lf_call=!1,b=$(EWA_App.SECTION_SHOW).find(".ewa-grid-frame[id]"));if(0==b.length)console.log("loadMore ewa_obj ? (listframe or grid)");else{if(1<b.length)for(var f=0;f<b.length;f++){var g=b[f];if(""!=g.id){b=$(g);break}}b=b.attr("id");
b=b.replace("EWA_LF_","");var h=EWA.F.FOS[b];b=h.Url;h._PageCurrent=1;(f=h.SearchGetExp(EWA_App.SECTION_SHOW))&&(b+="&EWA_LF_SEARCH="+f.toURL());h._Sort&&(b+="&EWA_LF_ORDER="+h._Sort.toURL());h.Url=b+"&EWA_PAGECUR=1";h.ReloadAfter&&(h.__ReloadAfter=h.ReloadAfter);h.ReloadAfter=function(){h.__ReloadAfter&&(h.__ReloadAfter(),h.ReloadAfter=h.__ReloadAfter);e.ajaxLoadedAfter(a,a,c,d,!1,!0);c.myScroll&&$(c.myScroll.wrapper).animate({"padding-top":0},521,function(){$(this).removeClass("reloading").css("padding-top",
"")});c._is_reloadding=!1;h.ReloadAfter=h.__ReloadAfter?h.__ReloadAfter:null};h.Reload()}}}},showCoverDiv:function(){this._COVER&&document.contains(this._COVER[0])||(this._COVER=$('<div id="showCoverDiv" ontouchmove="return false;" style="z-index:981281;position:absolute;top:0;left:0;bottom:0;right:0;"></div>'),$("body").append(this._COVER));this._COVER.show()},hideCoverDiv:function(){this._COVER&&this._COVER.hide()},cover:function(a,b,c,d){b.id||(b.id=EWA_Utils.tempId("_show_"));EWA_App.State.prevShow=
b;var e=c?c.section_id:"-------";EWA_App.SECTION_SHOW=b;EWA_App.SECTION_HIDE=a;EWA_App.SECTION_URLS=c;EWA_App.SECTION_IS_BACK=d;a&&__SECTIONS[a.id]&&__SECTIONS[a.id].myScroll&&(__SECTIONS[a.id]._LastScrollY=__SECTIONS[a.id].myScroll.y,EWA_App.DEBUG&&console.log("\u8bb0\u5f55\u4f4d\u7f6e ["+a.id+"] ->"+__SECTIONS[a.id]._LastScrollY));EWA.CP_INIT||(EWA.CP_INIT=EWA.CP);var f=__SECTIONS[e];if(f){f.CONTENT_PATH?EWA.CP=f.CONTENT_PATH+"../":EWA.CP_INIT&&(EWA.CP=EWA.CP_INIT);EWA_App.DEBUG&&console.log("EWA.CP ="+
EWA.CP);this.showCoverDiv();f.Title&&$(b).find("header h1").html(f.Title);var g=!1;if(d)f.RefreshBackAction&&(g=!0);else if(!f.loaded||f.Refresh)g=!0;var h=$(b).find(".content");0==h.children().length&&(g=!0);if(g){f.loaded=!0;EWA_App.DEBUG&&console.log("cover->clear content!");h.html("");h.attr("id")||h.attr("id",EWA_Utils.tempId("_sc_"));f._paras=c.paras;var k=this._getRequestUrl(f,e);c=new EWA_AjaxClass;var l=this;l._is_ajax_loading=!0;$Tip("enus"==EWA.LANG?"Loading":"\u6570\u636e\u52a0\u8f7d\u4e2d",
function(){return!l._is_ajax_loading});c.Install(k,"",h[0].id,function(){EWA_App.DEBUG&&console.log("cover->AJAX INSTALL:"+k);l.ajaxLoadedAfter(a,b,f,h,d)});return}EWA_App.DEBUG&&console.log("\u4e0d\u5237\u65b0",f,d);this.hideCoverDiv();null!=f._LastScrollY&&f.myScroll&&(f.myScroll.scrollTo(0,f._LastScrollY),EWA_App.DEBUG&&(console.log("\u6062\u590d\u4f4d\u7f6e ["+f.ID+"] ->"+f._LastScrollY),f._LastScrollY=null))}this.swapPage(a,b,d);this.hideCoverDiv()},showOrders:function(a){a||(a=EWA_App.SECTION_SHOW.id);
a=$("section#"+a).find(".ewa-lf-header:eq(0)");if(0!=a.length){var b=0;a.find("td").each(function(){if(0==$(this).find("a").length)$(this).remove();else{var d=$(this).text();$(this).attr("order-index",b).addClass("ewa-app-lf-order");d.endsWith(" ^")?(d=d.replace(" ^","").trim(),$(this).find("a").addClass("asc").text(d)):d.endsWith(" v")&&(d=d.replace(" v","").trim(),$(this).find("a").addClass("desc").text(d));b++}});if(0!=b){5<b&&(b=5);var c={width:100/b+"%"};a.find("td.ewa-app-lf-order").css(c);
a.css("display","block").css("width","100%");return a}}},reShowFilter:function(a,b,c){a||(a=EWA_App.SECTION_SHOW.id);var d=$("section#"+a+" .ewa-lf-search");if(0!=d.length&&!d.attr("reshowfilter")){b||d.css("position","absolute").css("top",0).css("left",0);b||(setTimeout(function(){$("section#"+a+">.content>.iscroller").css("padding-top",d.height()).css("padding-bottom",d.height()+50);__SECTIONS[a].myScroll&&__SECTIONS[a].myScroll.refresh()},310),$("section#"+a+">.content").append(d));$("section#"+
a+" .ewa-lf-search-item-title").hide();var e=[];$("section#"+a+" .ewa-lf-search-item").each(function(){$(this).find("a").remove();var q=$(this).find(".ewa-lf-search-item-title").text();$(this).find("input[type=text]").each(function(){$(this).attr("onclick")&&0<=$(this).attr("onclick").indexOf("EWA.UI.Calendar.Pop")?$(this).attr("onclick","").attr("type","date"):$(this).attr("placeholder",q)});var n=!1;$(this).find("select").each(function(){this.options[0].text="-- "+q+" --";this.options[0].value=
"";n=!0});n&&e.push(this)});if(1<e.length){b=document.createElement("table");for(var f=100/e.length,g=b.insertRow(-1),h=e[0].parentNode,k=0;k<e.length;k++){var l=g.insertCell(-1);l.style.width=f+"px";l.style.padding=0;l.appendChild(e[k])}b.style.width="100%";b.cellPadding=0;b.cellSpacing=0;h.appendChild(b)}if(!c){var p=[],m=[];c=$("section#"+a+" .ewa-lf-search-type-text");0<c.length&&(c.each(function(q){var n=$(this).find(".ewa-lf-search-item-title").text();n=n.replace(":","").replace("\uff1a","");
var t=$(this).find("input[type=text]").attr("name");p.push(n);m.push(t);0<q&&$(this).hide()}),$(c[0]).addClass("ewa-app-lf-search-compose"),$(c[0]).find("input[type=text]").attr("name",m.join(",")).attr("placeholder",p.join(", ")))}var r=this;d.find(".ewa-lf-search-fix-m1").bind("click",function(){r.showOptionsOnLfMenu(this)});d.attr("reshowfilter",1)}},beautfyFilter:function(a){a=a?$(a):$("section#"+EWA_App.SECTION_SHOW.id+" .ewa-lf-search");0==a.length||a.attr("beautfyFilter")||(a.attr("beautfyFilter",
1),a.find(".ewa-lf-search-item").each(function(){var b=$(this).find(".ewa-lf-search-item-title");b.hide();var c=b.text().replace(":","");b=$(this).find(".ewa-lf-search-item-ctl input");0<b.length?(b.each(function(){$(this).attr("onclick")&&0<=$(this).attr("onclick").indexOf("EWA.UI.Calendar.Pop")&&$(this).attr("onclick","").attr("type","date")}),b.attr("placeholder",c),1==b.length&&$(this).addClass("ewa-app-lf-search-compose")):$(this).find("select").each(function(){this.options[0].text="-- "+c+" --";
this.options[0].value=""})}))},showOptionsOnLfMenu:function(a){var b=[],c={};$(a).find("input").each(function(){this.checked&&(c[this.id]=!0);var e=$(this);e={txt:this.parentNode.outerHTML,js11:"$('#"+e.attr("id")+"').trigger('click');return;",js:" ",notclose:!0};b.push(e)});var d=this;this.showLfMenuBox(b).find("input").each(function(){c[this.id]&&(this.checked=!0);d.reShowRadio(this)})},radioClick:function(a){var b=$(a).attr("last_t")||0,c=(new Date).getTime();if(!(500>c-b))if($(a).attr("last_t",
c),c=$(a).attr("rid"),b=$(EWA_App.SECTION_SHOW).find("input[id='"+c+"']"),0==b.length)console.log("radioClick",c,"not found");else if(b=b[0],"radio"==b.type?(c=b.name,$(EWA_App.SECTION_SHOW).find('input[type=radio][name="'+c+'"]').each(function(){$(this).parent().find("i.ewa-app-radio").removeClass("fa-check");$(this).parent().removeClass("ewa-app-radio-checked")}),b.checked=!0):b.checked=!b.checked,b.checked?($(b).parent().addClass("ewa-app-radio-checked"),$(a).find("i").addClass("fa-check")):($(b).parent().removeClass("ewa-app-radio-checked"),
$(a).find("i").removeClass("fa-check")),b.onclick)b.onclick()},reShowRadios:function(a){var b=this;(a?$(a):$(EWA_App.SECTION_SHOW)).find(".ewa-frame").find("input[type=radio],input[type=checkbox]").each(function(){b.reShowRadio(this)})},reShowRadio:function(a){var b=$(a);if(0!=b.length)if(b.attr("reshowradio")){var c=$('a.ewa-app-radio-box[rid="'+a.id+'"]');a.checked?$(c).find("i").addClass("fa-check"):$(c).find("i").removeClass("fa-check")}else{a=b[0];var d=b.attr("id");d||(d=EWA_Utils.tempId("reShowRadio"),
b.attr("id",d));var e=b.parent(),f=e.find('label[for="'+d+'"]'),g=0==f.length?"":f.html();c=document.createElement("a");c.className="ewa-app-radio-box";e.append(c);e='<i class="ewa-app-radio '+b[0].type+' fa"></i><span class="ewa-app-radio-text">'+g+"</span>";$(c).html(e);$(c).attr("onclick","EWA_App.Section.radioClick(this)");$(c).attr("rid",d);$(c).attr("rname",this.name);a.checked&&$(c).find("i").addClass("fa fa-check");b.hide();b.attr("reshowradio","yes");f.hide()}},showLfMenus:function(a,b){if(b=
a){if(!("TR"==b.tagName&&0<=b.className.indexOf("ewa-lf-data-row")||(b=$(b).parentsUntil("tr.ewa-lf-data-row").last().parent()[0],"TR"==b.tagName&&0<=b.className.indexOf("ewa-lf-data-row")))){alert("\u627e\u4e0d\u5230\u5bf9\u5e94\u7684TR\uff08ewa-lf-data-row\uff09");return}var c=EWA_Utils.tempId("ewa-app-lf-menu-trigger");$(b).parent().find(".ewa-app-lf-menu-trigger").removeClass("ewa-app-lf-menu-trigger");$(a).addClass("ewa-app-lf-menu-trigger").attr("tgid",c);var d=$(EWA_App.SECTION_SHOW).attr("id"),
e=[];$(b).find("input[type=button]").each(function(){var f=$(this).attr("ewa_click");f||(f=$(this).attr("onclick"));var g="butFlow"==$(this).attr("ewa_tag");if(f)if(0<=f.indexOf("EWA.UI.Dialog.OpenReloadClose"))f=f.replace("EWA.UI.Dialog.OpenReloadClose","EWA_App.Section.fake_EWA_UI_Dialog_OpenReloadClose"),f=eval(f)+"&EWA_APP_FROM_SECTION_ID="+d+(g?"&isflow=1":""),f={txt:$(this).val(),href:f};else{if(0<f.indexOf("this")&&(g=EWA_Utils.tempId("_ref_"),$(this).attr("ewa_app_ref_id",g),f=f.replace("this",
"$('input[ewa_app_ref_id="+g+"]')[0]")),f={txt:$(this).val(),js:f},g=$(this).attr("data-href"))f.href=g}else g=EWA_Utils.tempId("_ref_"),$(this).attr("ewa_app_ref_id",g),f="$('input[ewa_app_ref_id="+g+"]').trigger('click')",f={txt:$(this).val(),js:f};e.push(f);f.id=this.id});EWA_App.DEBUG&&console.log(e);this.showLfMenuBox(e,"$('a[tgid="+c+"]').removeClass('ewa-app-lf-menu-trigger');")}else alert("\u4f20\u5165\u7684\u5bf9\u8c61\u4e3a\u7a7a")},showLfMenuBox:function(a,b){var c=[];b=(b||"")+";$(this).parent().parent().hide();";
var d=6<a.length,e;for(e in a){var f=a[e],g=f.js,h=f.href,k="<a ";d&&(k+=' style="width:50%;float:left;"');k+=" class='ewa-app-lf-menu-item ref-id-"+f.id+" ";if(h)k+=" href' href='"+h+"' onclick=\""+b+'">';else if(g)g=g.replace(/"/gi,"&quot;"),k=f.notclose?k+(" js' onclick=\""+g+'; ">'):k+(" js' onclick=\""+g+"; "+b+'">');else{EWA_App.DEBUG&&console.log("not ",f);continue}k+=f.txt+"</a>";c.push(k)}(a=$X("___ewa_lf_menu"))?(a=$(a),a.find("i").attr("onclick",b)):(window._EWA_UI_DIALOG_COVERINDEX=1231,
a=document.createElement("div"),a.id="___ewa_lf_menu",a.className="ewa-ddl-box ewa-frame ewa-app-lf-menu",a.innerHTML="<div class='ewa-ddl-box-content'></div><span><i onclick=\""+b+"\" class='fa fa-close'></i></span>",document.body.appendChild(a),a=$("#___ewa_lf_menu"));c=c.join("");a.find(".ewa-ddl-box-content").html(c);var l=this;a.find("a.href").each(function(){l.bindAEvent(this)});a.css("bottom",-200).show();a.animate({bottom:0},200,"swing");return a},lazyload:function(a){if(!a&&EWA_App.SECTION_SHOW){var b=
__SECTIONS[EWA_App.SECTION_SHOW.id];b&&(a=b.myScroll)}if(a){var c=document.documentElement.clientHeight-100;$(a.scroller).find(".EWA_GRID_BG_IMG[is_lazy_load=true]").each(function(){var d=$(this);if(d.offset().top<c){d.removeAttr("is_lazy_load");var e=d.attr("ori_src");d.css("background-image",'url("'+e+'")')}});$(a.scroller).find(".cover").each(function(){var d=$(this);if(!d.attr("lazyloaded")){var e=d.offset().top;e<c&&0<=e&&(d.attr("lazyloaded",1),e=d.attr("backgroundimage"),d.attr("backgroundimage1",
e),e&&(0>e.indexOf("url(")&&(e='url("'+e+'")'),d.css("background-image",e)))}});$(a.scroller).find("img[is_lazy_load]").each(function(){var d=$(this);if(!d.attr("lazyloaded")){var e=d.offset().top;e<c&&0<=e&&(d.attr("lazyloaded",1),d.removeAttr("is_lazy_load"),(e=d.attr("lazy"))&&d.attr("src",e))}})}},checkIsChromePassive:function(){if(void 0===this.__is_supportsPassive){var a=!1;if(EWA.B.IS_ANDROID){try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",
null,b)}catch(c){}this.__is_supportsPassive=a;EWA_App.DEBUG&&console.log(this.__is_supportsPassive)}}return this.__is_supportsPassive},createIScroll:function(a,b){EWA_App.IS_STOP_TOUCH_MOVE=!0;var c={click:!0,probeType:3,scrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0},d=$(a).find(".content");if(0==d.length)console.log("\u521b\u5efaIScroll\u9519\u8bef, content\u4e3a\u7a7a",b.ID);else{d=d[0];try{b.myScroll=new IScroll(d,c)}catch(g){console.log("\u521b\u5efaIScroll\u9519\u8bef",$(a).id,g);
return}b._ewa_load_more_obj=null;b.myScroll._events.scroll=[];if(1<$(a).find(".cover").length||$(a).find(".EWA_GRID_BG_IMG[is_lazy_load=true]"))$(a).find(".cover").each(function(){if(!$(this).attr("lazyloaded")){var g=$(this).css("background-image");g&&"none"!=g&&$(this).css("background-image","none").attr("backgroundimage",g)}}),b.myScroll._events.scroll.push(function(){EWA_App.Section.lazyload(this)}),setTimeout(function(){EWA_App.Section.lazyload(b.myScroll)},121);b.myScroll._events.scrollEnd=
[function(){$(EWA_App.SECTION_SHOW).find(".iScrollLoneScrollbar").animate({opacity:0},10)}];b.myScroll._events.scrollStart=[function(){$(EWA_App.SECTION_SHOW).find(".iScrollLoneScrollbar").animate({opacity:.5},10)}];c=b.myScroll.scroller;if(b.IScrollScale){var e=$(a).find(b.IScrollScale);if(0==e.length){EWA_App.DEBUG&&console.log(b.IScrollScale+" not defined (IScrollScale)");return}$(a).addClass("ewa-app-iscrollscale");$(a).attr("IScrollScale",b.IScrollScale);e.addClass("ewa-app-iscrollscale-target");
$(a).find(".content:eq(0)").append(e);var f=e.height();b.myScroll._events.scroll.push(function(){if(!(0>this.y&&0>this.distY)){var g=1+this.distY/(3*f);1>g||e.attr("a")==g||e.css("transform","scale("+g+")").css("transition-duration","0s").attr("a",g)}});b.myScroll.gdxScrollEnd=function(){e.attr("a")?e.css("transform","scale(1)").css("transition-duration","0.6s"):e.attr("a",null)}}b.myScroll.gdxScrollEnd1=function(g){if(!(655<g.timeStamp-this.startTime||140<Math.abs(this.distY)||100>Math.abs(this.distX)))if(0>
this.distX)if(null!=g.target&&g.target.getAttribute("delete")){var h=$(".scroll-delete-active");0<h.length&&(h.addClass("scroll-delete-deactive"),setTimeout(function(){h.removeClass("scroll-delete-active").removeClass("scroll-delete-deactive")},1E3));g=$(g.target).parent().parent();g.addClass("scroll-delete-active");g.offset();g.removeAttr("onmouseover").removeAttr("onclick")}else{if(g=$(EWA_App.SECTION_SHOW).find("footer a.ft-item"),0!=g.length){var k=-1;g.each(function(p){-1==k&&this.className&&
0<this.className.indexOf("ft-item-cur")&&(k=1*p)});0>k||k==g.length-1||g[k+1].click()}}else if(0<this.distX){if(null!=g.target&&g.target.getAttribute("delete")){var l=$(g.target).parent().parent();if(l.hasClass("scroll-delete-active")){l.addClass("scroll-delete-deactive");setTimeout(function(){l.removeClass("scroll-delete-active").removeClass("scroll-delete-deactive")},1E3);return}}0<window.history.length&&window.history.back()}};b.IScrollMore&&(b.myScroll.gdxScrollEnd=function(g){b.myScroll&&b.myScroll.y&&
33<b.myScroll.y&&($(b.myScroll.wrapper).addClass("reloading"),setTimeout(function(){EWA_App.Section.reload()},333))},b.noMoreData=function(){return!1},b.myScroll._events.scroll.push(function(){if(b.myScroll&&b.myScroll.y&&-1!=b.myScroll.directionY){var g=b.myScroll.y-b.myScroll.maxScrollY;247>g&&100<g&&(EWA_App.DEBUG&&(console.log(b.myScroll),console.log("myScroll.loadMore: "+g)),EWA_App.Section.loadMore(!0))}}));EWA_App.MonitorResize.add(c,function(g,h){if(!b._is_reloadding){if(b.myScroll){if((b.myScrollLastTimer||
0)==h)return;b.myScrollLastTimer=h;b.myScroll.refresh();EWA_App.DEBUG&&console.log("scroll refresh("+b.ID+")")}b.RefreshAfter&&b.RefreshAfter(b)}})}},setWeiXinTitle:function(a){var b=$("body");document.title=a;var c=$('<iframe class="fack-weixin" width=0 style="display:none" height=0 src="about:blank"></iframe>');b.append(c);setTimeout(function(){c.remove()},1300)},setTitle:function(a,b){if(b=b||EWA_App.SECTION_SHOW){var c=__SECTIONS[b.id];c&&(c._title_old=a);$(b).find("header h1").text(a);document.title=
a;EWA_App.IS_IN_WEIXIN_MINI&&EWA_App.Section.setWeiXinTitle(document.title)}},ajaxLoadedAfter:function(a,b,c,d,e,f){var g=this;$(b).find(".EWA_TABLE");var h=this.getEWAS();c.Title?this.setTitle(c.Title):0<h.length&&this.setTitle(h[0].Title);(new EWA_UrlClass).GetParameter("EWA_APP_FROM_SECTION_ID");for(d=0;d<h.length;d++){var k=h[d];k.SECTION_CFG=c;k instanceof EWA_FrameClass?(this.frameUIAndEvents(k),window.EWA_CGI&&0<$(b).find(".ewa-ipt-droplist").length&&(EWA_App.DEBUG&&console.log("\u6e05\u9664EWA_CGI, "+
window.EWA_CGI),window.EWA_CGI=null)):k instanceof EWA_ListFrameClass&&this.listFrameUIAndEvents(k)}d=!1;(d=c.IScroll instanceof Function?c.IScroll(b):c.IScroll)&&!f?(EWA_App.IS_STOP_TOUCH_MOVE=!0,this.createIScroll(b,c)):(EWA_App.IS_STOP_TOUCH_MOVE=!1,$("#slider_bar").hide(),$(b).find(".content").css("overflow","auto"),$(b).find(".add-div").css("padding-bottom",50));g=this;$(b).attr("id");this.reShowFilter();$(b).find("a").each(function(){g.bindAEvent(this)});this.reShowRadios(b);c.Installed&&c.Installed(b);
f=$(b).find("footer");for(d=0;d<f.length;d++)c=f[d],0==d?"SECTION"!=c.parentNode.tagName&&$(b).append(c):$(c).remove();f=$(b).find("header");for(d=0;d<f.length;d++)c=f[d],0==d?"SECTION"!=c.parentNode.tagName&&$(b).prepend(c):$(c).remove();this.swapPage(a,b,e);this._is_ajax_loading=!1},frameDatePlaceHolder:function(a){var b=$(a),c=[];c.push(b.attr("onmousedown"));var d=b.attr("onblur");d&&c.push(d);var e=b.attr("ewa_tag");d="date";"datetime"==e?(d="datetime-local",a.value&&(e=(new EWA_DateClass(a.value)).FormatDateTime("yyyy-MM-dd").replace(" ",
"T"),EWA_App.DEBUG&&console.log(e),a.value=e,a.setAttribute("_formatdatetime_",e))):"time"==e?d="time":a.value&&(e=(new EWA_DateClass(a.value)).FormatDate("yyyy-MM-dd"),EWA_App.DEBUG&&console.log(e),a.value=e,a.setAttribute("_formatdate_",e));c={onchange:c.join(";"),type:d};b.removeAttr("readonly").removeAttr("onclick").removeAttr("onfocus").removeAttr("onkeydown").attr(c);c=b.attr("placeholder");d="ewa-date-placeholder";b.parent().hasClass("ewa-with-icon")&&(d+=" ewa-with-icon");e="";a.value&&(e=
" style='display: none' ");a=$("<div id='"+EWA_Utils.tempId()+"' class='"+d+"' "+e+"></div>");a.text(c);c=b.parentsUntil("tr").last();c.css("position","relative");c.append(a);b.attr("_placeholder_id",a.attr("id"));b.on("change keyup",function(){this.value?$("#"+this.getAttribute("_placeholder_id")).hide():$("#"+this.getAttribute("_placeholder_id")).show()})},frameUIAndEvents:function(a){var b=this,c=a.SECTION_CFG,d=$('section[id="'+a.SECTION_CFG.ID+'"]'),e=d.find("#EWA_FRAME_"+a._Id);a.H5Type();var f=
(new EWA_UrlClass).GetParameter("EWA_APP_FROM_SECTION_ID"),g=__SECTIONS[f];f&&(EWA_App.DEBUG&&console.log("EWA.F.FOS['"+a._Id+"'].ReloadAfter ("+f+")"),a.ReloadAfter&&(a._App_ReloadAfter=a.ReloadAfter),a.ReloadAfter=function(){a._App_ReloadAfter&&a._App_ReloadAfter();g.RefreshBackAction=!0;setTimeout(function(){g.RefreshBackAction=!1},500);EWA_App.back()});e.find('div[tag="REPT"]').each(function(){$(this).attr("onmousedown",null)});setTimeout(function(){e.find("textarea").each(function(){var h=$(this);
h.attr("notautosize")||h.attr("aa")||(autoTextarea(this),h.attr("aa","aa"));if(EWA_App.IS_IN_WEIXIN)h.on("blur",function(){window.scroll(0,0)})})},200);e.find(".EWA_INPUT").each(function(){var h=$(this);if(EWA_App.IS_IN_WEIXIN&&"file"!=this.type&&"radio"!=this.type&&"checkbox"!=!this.type&&"submit"!=!this.type&&"button"!=this.type&&"image"!=this.type)h.on("blur",function(){window.scroll(0,0)});if(h.hasClass("ewa-ipt-date")||"time"==h.attr("ewa_tag"))b.frameDatePlaceHolder(this);else{h.hasClass("ewa-ipt-droplist")&&
(h.attr("oninput1",h.attr("oninput")),h.attr("onkeyup1",h.attr("onkeyup")),h.attr("readonly","readonly"),h.attr("onmousedown","createDDL(this)"),h.removeAttr("onkeyup"),h.removeAttr("oninput"));var k=a.ItemList.GetItem(this.id);k&&(k=$(k).find("DataItem Set").attr("DataType"),"Int"===k||"Number"===k?h.attr("type","tel"):"Number"===k&&h.attr("type","number"))}});c.ButtonOnFooter&&this.buttonOnFooter(d);EWA.B.IS_ANDROID&&e.find("input[type=file]").each(function(){$(this).attr("accept","image/*").removeAttr("multiple")})},
listFrameUIAndEvents:function(a){var b=a.SECTION_CFG,c=a.SECTION_CFG.ID,d=$('section[id="'+c+'"]'),e=d.find("[id=EWA_LF_"+a.Id+"]");e.find(".ewa-lf-data-row").each(function(){$(this).attr("onclick",$(this).attr("onmousedown"));$(this).attr("onmousedown",null)});var f=e.find('input[ewa_tag="butFlow"]'),g=!0;0==f.length&&(f=e.find(".ewa-lf-data-row #butModify"),g=!1);var h=this;f.each(function(){var k=h.convertButtonToAnchor(this,g,c);k&&($(this).hide(),$(this).parent().append(k).addClass("ewa-col-A").removeAttr("style"))});
e.find('input[id="butDelete"]').each(function(){$(this).parent().addClass("scroll-delete").removeAttr("style");$(this).parent().parent().find(".ewa-col-A a").attr("delete","delete");EWA.UI.Msg.IS_IN_APP||(EWA.UI.Msg.IS_IN_APP=!0)});e.find("a").each(function(){h.bindAEvent(this)});"Y"==b.SHOW_LF_MENUS&&this.listFrameSetUpBottomMenu(e,a);"Y"==b.SHOW_ORDERS&&(e=this.showOrders(),d.find(".ewa-lf-search .ewa-lf-header").remove(),d.find(".ewa-lf-search").append(e));"Y"!=b.USE_EWA_LF&&!0!==b.USE_EWA_LF||
"Y"==b.IScrollMore||h.moveSplitToFooter();a.ReloadAfterApp=function(){EWA_App.DEBUG&&(console.log("\u89e6\u53d1 ewa \u7684 ReloadAfterApp"),console.log(a));b._ewa_load_more_obj=null;h.listFrameUIAndEvents(a);b.myScroll&&(h.lazyload(b.myScroll),b.myScroll.scrollTo(0,0,100))};b._is_reloadding=!1},listFrameSetUpBottomMenu:function(a,b){var c="<td class='ewa-col-A'><a onclick='EWA_App.Section.showLfMenus(this,\""+b.Id+"\");' class='show-lf-menus'></a></td>";$(a).find("tr.ewa-lf-data-row").each(function(){$(this).attr("SHOW_LF_MENUS")||
$(this).append(c).attr("SHOW_LF_MENUS",1)})},convertButtonToAnchor:function(a,b,c){return(a=$(a).attr("onclick"))&&0<=a.indexOf("EWA.UI.Dialog.OpenReloadClose")?(a=a.replace("EWA.UI.Dialog.OpenReloadClose","EWA_App.Section.fake_EWA_UI_Dialog_OpenReloadClose"),b=eval(a)+"&EWA_APP_FROM_SECTION_ID="+c+(b?"&isflow=1":""),c=$("<a convertButtonToAnchor='1' class='ewa-anchor'></a>"),c.attr("href",b),c):null},fake_EWA_UI_Dialog_OpenReloadClose:function(a,b,c,d,e,f,g){d=EWA_App.SECTION_SHOW&&"ewa"==EWA_App.SECTION_SHOW.id?
"ewa1":"ewa";"ewa1"!=d||__SECTIONS[d]||(__SECTIONS[d]=__SECTIONS.ewa);if(0<c.toUpperCase().indexOf(".LF.")||0<c.toUpperCase().indexOf(".LISTFRAME."))d=EWA_App.SECTION_SHOW&&"ewa_lf"==EWA_App.SECTION_SHOW.id?"ewa_lf1":"ewa_lf","ewa_lf1"!=d||__SECTIONS[d]||(__SECTIONS[d]=__SECTIONS.ewa_lf);if("yes"==g&&EWA.F&&EWA.F.FOS[a]&&EWA.F.FOS[a].Url){a=new EWA_UrlClass(EWA.F.FOS[a].Url);a.RemoveEwa();g=new EWA_UrlClass("a1?"+e);for(var h in g._Paras)e=g.GetParameter(h),a.AddParameter(h,e);e=a.GetParas()}return(window.location.href.split("#")[0]+
"#"+d+"?xmlname="+b+"&itemname="+c+"&"+e+"&EWA_AJAX=INSTALL").replace(/\|/ig,"%7c")},buttonOnFooter:function(a){a=a?$(a):$(EWA_App.SECTION_SHOW);a.find("#butClose").remove();var b=a.find(".EWA_FRAME_GROUP_BUTTONS"),c=!1;if(0==b.length)var d=a.find(".EWA_TD_B input,.EWA_TD_B button");else d=b.find("input"),b.hide(),c=!0;a.find(".EWA_TD_B").hide();var e=a.find("footer"),f=100/d.length;e.html("");var g=a.find("form").attr("id");a.find("form").append('<div class="ewa-app-bottom-append" ></div>');d.each(function(h){var k=
document.createElement("input");k.id="butOk";k.value=this.value||this.innerHTML;k.type="button";k.style.width=f+"%";k.style.left=f*h+"%";k.style.display="block";0<h&&(k.style.borderLeft="1px solid #fff");0==c&&"submit"==this.type?k.setAttribute("onclick","$X('"+g+"').onsubmit();"):(h=c?this.id:EWA_Utils.tempId("ref_but_"),c||(this.id=h),k.setAttribute("rid",h),k.setAttribute("onclick","EWA_App.Section.footerButtonRelate(this);"),("none"==this.style.display||this.disabled)&&k.setAttribute("disabled",
"disabled"));e.append(k)})},footerButtonRelate:function(a){var b=$(a).attr("rid"),c=$X(b);null==c?console.log("\u4e0d\u80fd\u627e\u5230 ref_obj id="+b):(c.onclick(),$(a).parent().find("input").each(function(){var d=$(this).attr("rid"),e=$X(d);null==e?console.log("\u4e0d\u80fd\u627e\u5230 ref_obj id="+d):(this.value=e.value,"none"==e.style.display||e.disabled?this.setAttribute("disabled","disabled"):this.removeAttribute("disabled"))}))},bindAEvents:function(a){var b=this;$(a||EWA_App.SECTION_SHOW).find("a").each(function(){b.bindAEvent(this)})},
bindAEvent:function(a){a=$(a);if(!a.attr("ckjs")){var b=this,c=a.attr("href");!c||0>c.indexOf("#")||(a[0].addEventListener("click",function(d){b.handleAClick(this,d);return!1},!1),a.attr("ckjs","g"))}},handleAClick:function(a,b){b&&(b.stopPropagation(),b.preventDefault());b=(new Date).getTime();var c=$(a).attr("t");$(a).attr("t",b);if(!(c&&144>b-c)){var d=a.href;if(!(null==d||0>d.indexOf("#"))){b=EWA_App.Section.getParas(d);if(b.section_id&&EWA_App.State.prevShow==$("section[id="+b.section_id+"]")[0])return!1;
var e=a.innerText.trim();$(a).addClass("act");d=EWA_App.ENTRY_URL+"#"+d.split("#")[1];EWA_App.DEBUG&&console.log(d);var f=(new EWA_UrlClass(d)).GetParameter("EWA_APP_SECTION_REPLACE");EWA_App.DEBUG&&console.log(f);EWA_App.handleAClickBefore?EWA_App.handleAClickBefore(b,d,e,function(){EWA_App.State.state(e,d,!1,f)}):setTimeout(function(){EWA_App.State.state(e,d,!1,f)},10);setTimeout(function(){$(a).removeClass("act")},500)}}},showLargeAddButton:function(a,b){var c=$(EWA_App.SECTION_SHOW),d=c.find(".ewa-grid-frame"),
e=c.find(".ewa-lf-frame");if(0<d.length){if(0<d.find(".ewa_grid_li").length)return;d=d.parent()}else if(0<e.length){if(0<e.find(".ewa-lf-data-row").length)return;d=e.parent()}else return;var f=$('<a class="ewa-app-large-add-btn"></a>');a||(a="enus"==EWA.LANG?"Publish your work and let more people know about you":"\u53d1\u8868\u60a8\u7684\u4f5c\u54c1\uff0c\u8ba9\u66f4\u591a\u7684\u4eba\u4e86\u89e3\u60a8\u3002");f.text(a);d.html("").append(f);if(b)f[0].onclick=function(){b(this)};else{var g=this;setTimeout(function(){var h=
c.find(".ewa-app-btn-add a").attr("href");f.attr("href",h);g.bindAEvent(f[0])},444)}},showBtnAdd:function(a,b){a=$(a).find(".ewa-app-btn-add");a.html("<a></a>");a.show();b&&(a.find("a").attr("href",b),this.bindAEvent(a.find("a")[0]));return a},hideBtnAdd:function(a){a=$(a).find(".ewa-app-btn-add");a.hide();return a},swapPage:function(a,b,c){var d=$(a).attr("id"),e=$(b).attr("id"),f=__SECTIONS[e],g=__SECTIONS[d];if(d==e){if(f.ShowCompleted)try{f.ShowCompleted(b,a)}catch(m){console.log(f.ShowCompleted,
m)}this.hideCoverDiv()}else{EWA_App.DEBUG&&console.log("swapPage",a,b,c);if(f.ShowPlusButton){d=(new EWA_UrlClass).GetParas();var h=f.ShowPlusButton;d&&(h=h+"&"+d);this.showBtnAdd(b,h+("&EWA_APP_FROM_SECTION_ID="+e))}else{var k=null;if(0==e.indexOf("ewa")||"Y"==f.SHOW_LF_ADD)d=$("section#"+e+" .ewa_lf_func"),d.find("input[type=button]").each(function(){var m=$(this).attr("res");m&&0<m.indexOf("butAdd")&&(k=$(this).attr("onclick"))}),k||(k=d.find(".ewa_lf_func_dact[ewa_click]:eq(0)").attr("ewa_click"));
EWA_App.DEBUG&&(console.log("\u6dfb\u52a0\u6309\u94ae"),console.log(k));k?this.showBtnAdd(b).find("a").attr("onclick",k):this.hideBtnAdd(b)}g&&(g.Losted&&g.Losted(a),!g.Refresh&&g.myScroll&&(g.myScroll.___x=g.myScroll.x,g.myScroll.___y=g.myScroll.y));$(b).find("footer a.ft-item").each(function(){$(this).removeClass("ft-item-cur");$(this).attr("href").split("?")[0]=="#"+e&&$(this).addClass("ft-item-cur")});c&&EWA_App.IS_IN_WEIXIN&&(d=f._title_old||f.Title,document.title=d,this.setWeiXinTitle(d));if(f&&
"direct"==f.swap)EWA_App.DEBUG&&console.log(f.swap),$(a).hide(),$(b).css("display","flex"),$(b).css("-webkit-transform","translate3d(0,0,0)"),f.swap="",this.showCompleted(a,c);else{var l=EWA_App.Ani.getCss(c?g.swap:f.swap);c?$(b).css(l.INIT_BACK):$(b).css(l.INIT);$(b).css("display","flex");!f.Refresh&&f.myScroll&&f.myScroll.___y&&(EWA_App.DEBUG&&console.log(f.myScroll.___x,f.myScroll.___y),f.myScroll.scrollTo(f.myScroll.___x,f.myScroll.___y,0));var p=this;setTimeout(function(){c?($(a).css(l.BACK_HIDE),
$(b).css(l.BACK_SHOW),EWA_App.DEBUG&&console.log(a,b),EWA_App.DEBUG&&console.log(l.BACK_HIDE,l.BACK_SHOW)):($(a).css(l.HIDE),$(b).css(l.SHOW));setTimeout(function(){"pop"!=f.swap&&($(a).css({"-webkit-transform":"","-webkit-transition":""}),$(a).hide());if(f.ShowCompleted)try{f.ShowCompleted(b,a)}catch(r){console.log(f.ShowCompleted,r)}if(f.InitScrollToElement){var m=$(f.InitScrollToElement);0==m.length?EWA_App.DEBUG&&console.log("showCfg.InitScrollToElement none"):f.myScroll.scrollToElement(m[0],
f.InitScrollToElementTimer||0);f.InitScrollToElementTimer=null;f.InitScrollToElement=null}p.showCompleted(a,c)},500)},1)}}},showCompleted:function(a,b){this.hideCoverDiv();a=$(a).attr("id");var c=__SECTIONS[a];if(c){var d=!1;b?c.Refresh&&(d=!0):c.RefreshBackAction&&(d=!0);d&&(EWA_App.DEBUG&&console.log("showCompleted ("+a+") -> clear content!"),c.myScroll&&(c.myScroll.destroy(),delete c.myScroll,c.myScroll=null),$("section#"+a).remove())}},moveSplitToFooter:function(){var a=$(EWA_App.SECTION_SHOW),
b=a.find("footer");if(0!=b.length&&!__SECTIONS[a.attr("id")].IScrollMore){var c=a.find(".ewa-lf-frame").attr("id");if(c&&EWA.F.FOS[c.replace("EWA_LF_","")]){c=b.attr("rid");c||(c=EWA_Utils.tempId("_rid_"),b.attr("rid",c));var d=a.find(".content .ewa-lf-frame-split");0<d.length&&d.attr("rid1")!=c&&(d.attr("rid1",c),b.html("").append(d),b=d.find("td:eq(0) b:last()").text())&&(b="<span class='records'> ("+b+")</span>",a.find("header h1 .records").remove(),a.find("header h1").append(b))}}}};
EWA_App.State={stack:[],inc:0,init:function(a){this.state(document.title,window.location.href,!0);this.stateListen();this.initUrl=window.location.href;this.prevShow=this.initSection=$('section[id="'+a+'"]')[0];$("a").each(function(){var b=this.href;!b||0<=b.toLowerCase().indexOf("javascript")||0>b.indexOf("#")||EWA_App.Section.bindAEvent(this)})},state:function(a,b,c,d){if(window.history.pushState){this.inc++;var e={title:a,url:b,inc:this.inc},f=e.title+"/"+e.url;if(this.___last_==f){EWA_App.DEBUG&&
console.log("none-push",this.___last_);return}this.___last_=f;var g=this;setTimeout(function(){g.___last_=null},444);EWA_App.DEBUG&&console.log("push",e);EWA_App.State._is_replace||d?(window.history.replaceState(e,a,b),EWA_App.State._is_replace=!1,this.stack[this.stack.length-1]=b):(window.history.pushState(e,a,b),this.stack.push(b));c||EWA_App.Section.handleState(e)}else alert("brower not support history.pushState");document.title=a},stateListen:function(){var a=this;window.addEventListener("popstate",
function(b){EWA_App.DEBUG&&console.log("popstate",b);var c=a.stack.pop();0==a.stack.length?(EWA_App.DEBUG&&console.log("\u5730\u5740\u5806\u6808\u4e3a\u7a7a\u4e86\uff0c\u91cd\u65b0\u5c06\u7b2c\u4e00\u9875\u5165\u6808"),a.state("",c,!0)):b.state&&(b.state._is_back=!0,EWA_App.Section.handleState(b.state))},!1)}};EWA.UI.Dialog.OpenReloadCloseOld=EWA.UI.Dialog.OpenReloadClose;
EWA.UI.Dialog.OpenReloadClose=function(a,b,c,d,e){a=EWA_App.Section.fake_EWA_UI_Dialog_OpenReloadClose(a,b,c,d,e);a+="&EWA_APP_FROM_SECTION_ID="+EWA_App.SECTION_SHOW.id;EWA_App.DEBUG&&console.log(a);EWA_App.State.state(null,a)};function $X(a){if(EWA_App.SECTION_SHOW&&EWA_App.SECTION_SHOW.id){var b=$("section#"+EWA_App.SECTION_SHOW.id+' [id="'+a+'"]');return 0==b.length?document.getElementById(a):b[0]}return document.getElementById(a)}
EWA_Utils.JsRegisterSrc=function(a,b){var c="ewa_js_register_"+a.hashCode();if($X(c)){if(b){console.log("skip-js: "+a);return}if(a.endsWith(".js")){console.log("skip-js: "+a);return}}b||a.endsWith(".js")||!EWA_App.SECTION_SHOW?b=document.getElementsByTagName("head")[0]:(b=$(EWA_App.SECTION_SHOW).find("div.js-registers"),0==b.length&&(b=$("<div class='js-registers'></div>"),$(EWA_App.SECTION_SHOW).find("div.content:eq(0)").append(b)),b=b[0]);var d=document.createElement("script");d.type="text/javascript";
d.language="javascript";d.id=c;try{d.src=a,b.appendChild(d)}catch(e){alert(e)}};EWA_Utils.JsRegister=function(a){if(EWA_App.SECTION_SHOW){var b=$(EWA_App.SECTION_SHOW).find("div.js-registers");0==b.length&&(b=$("<div class='js-registers'></div>"),$(EWA_App.SECTION_SHOW).find("div.content:eq(0)").append(b));b=b[0]}else b=document.getElementsByTagName("head")[0];var c=document.createElement("script");c.type="text/javascript";c.language="javascript";try{c.text=a,b.appendChild(c)}catch(d){alert(d)}};
function EWA_UrlClass(a){this._URL="";this._Paras={};this._Root="";this.SetUrl=function(b){this._URL=b;this._Paras={};var c=b.split("?");this._Root=c[0];if(!(0>b.indexOf("?")))for(ia=1;ia<c.length;ia++){b=c[ia].split("&");for(var d=0;d<b.length;d++){var e=b[d].split("="),f=e[0].toUpperCase(),g="";2==e.length&&(g=e[1],0<g.indexOf("#")&&(g=g.split("#")[0]));this._Paras[f]=g}}};this.GetParameter=function(b){return this._Paras[b.toUpperCase().trim()]};this.GetParas=function(b){var c=[],d;for(d in this._Paras){var e=
this._Paras[d];b&&(d=d.toLowerCase());null!=e&&c.push(d+"="+e)}return c.join("&")};this.SetRoot=function(b){this._Root=b};this.GetUrl=function(b){b=this.GetParas(b);var c="";0<b.length&&(c=0<=this._Root.indexOf("?")?"&":"?");return this._Root+c+b};this.AddParameter=function(b,c,d){b=b.toUpperCase().trim();this._Paras[b]=d?c:encodeURIComponent(c);return this.GetUrl()};this.RemoveParameter=function(b){b=b.toUpperCase().trim();this._Paras[b]=null;return this.GetUrl()};this.RemoveEwa=function(){for(var b in this._Paras)"XMLNAME"!=
b.toUpperCase()&&"ITEMNAME"!=b.toUpperCase()&&0!=b.toUpperCase().indexOf("EWA_")||this.RemoveParameter(b)};this.SetUrl(a||document.location.href)}function $U(a){var b=new EWA_UrlClass;b.RemoveEwa();var c=[],d;for(d in b._Paras){var e=b._Paras[d];a&&(d=d.toLowerCase());null!=e&&(0<e.indexOf("#")&&(e=e.split("#")[0]),c.push(d+"="+e))}return c.join("&")}
function EWA_FrameShowAlert(a,b){if(1!=a.getAttribute("show_alert")){a.setAttribute("show_alert",1);var c=a;do if(c=c.parentNode,"BODY"==c.tagName){c=null;break}while("TR"!=c.tagName||1!=c.getAttribute("SHOW_MSG"));if(c){for(var d=a=0;d<c.cells.length;d++){var e=c.cells[d];"none"!=e.style.display&&(a+=e.colSpan)}d=$(c);var f=d.next();f.attr("error")||(c=c.parentNode.insertRow(c.rowIndex+1),c.setAttribute("error",1),e=c.insertCell(-1),e.colSpan=a,e.className="ewa-tip-error",f=$(c),e.innerHTML='<div class="ewa-tip-error-info"></div>');
d.find("td").addClass("ewa-tip-error");f.find(".ewa-tip-error-info").html(b)}else b=$(a),b.attr("ori_bc",b.css("background-color")),b.css("background-color","pink"),a.focus()}}
function EWA_FrameRemoveAlert(a){if(1==a.getAttribute("show_alert")){a.setAttribute("show_alert",0);var b=a;do if(b=b.parentNode,"BODY"==b.tagName){b=null;break}while("TR"!=b.tagName||1!=b.getAttribute("SHOW_MSG"));b?(a=$(b),a.find("td").removeClass("ewa-tip-error"),a=a.next(),a.attr("error")&&a.remove()):(a=$(a),a.css("background-color",a.attr("ori_bc")))}}
EWA_App.showFrameAsMobile=function(a){var b="SECTION_"+(a.Id||a._Id);if(!window.__SECTIONS||!__SECTIONS[b])if(0<window.location.href.indexOf("#"+b))window.location.href=window.location.href.split("#")[0];else{var c=new EWA_UrlClass(a.Url);c.AddParameter("EWA_AJAX","INSTALL");c.AddParameter("EWA_APP","1");c=c.GetUrl();c=a.appCfg||{ID:b,IScroll:"Y",IScrollMore:"Y",PageFooter:"N",PageHeader:"Y",Refresh:"N",USE_EWA_LF:"Y",RE_SHOW_LF_FILTER:"Y",SHOW_LF_MENUS:"Y",SHOW_ORDERS:"Y",SHOW_LF_ADD:"Y",EWA:!1,
U:c,loaded:!0,swap:"direct",Title:a.Title};a instanceof EWA_FrameClass&&!a.appCfg&&(c.PageFooter="Y",c.ButtonOnFooter="Y",c.USE_EWA_LF="N",c.RE_SHOW_LF_FILTER="N",c.SHOW_LF_MENUS="N",c.SHOW_ORDERS="N",c.SHOW_LF_ADD="N",c.IScrollMore="N");var d={ButtonOnFooter:"Y",Css:"ewa",EWA:!0,ID:"ewa",IScroll:!0,IScrollMore:!1,PageFooter:"Y",PageHeader:"Y",Refresh:"Y",RE_SHOW_LF_FILTER:"Y",U:EWA.CP+"/EWA_STYLE/cgi-bin/index.jsp",USE_EWA_LF:"Y"},e=[];e.push(c);e.push(d);EWA_App.initCfgs(e);EWA_App.start(b);a.SECTION_CFG=
__SECTIONS[b];a instanceof EWA_FrameClass?(EWA_App.Section.buttonOnFooter(),EWA_App.Section.frameUIAndEvents(a)):(EWA_App.Section.reShowFilter(),EWA_App.Section.listFrameUIAndEvents(a))}};
function createDDL(a){window.__createDDL=a;var b=$X("___ewa_ddl");b||(window._EWA_UI_DIALOG_COVERINDEX=1231,b=document.createElement("div"),b.id="___ewa_ddl",b.className="ewa-ddl-box ewa-frame",b.innerHTML="<div class='ewa-ddl-box-content'></div><i onclick='closeDDL1()' class='fa fa-close'></i>",document.body.appendChild(b));b=$("#___ewa_ddl");a=$(a).parent().html();b.find(".ewa-ddl-box-content").html(a);var c=b.find("input:eq(0)");a=b.find("input:eq(1)");c.attr("oninput",c.attr("oninput1")).attr("onkeyup",
c.attr("onkeyup1"));c.attr("onmousedown",null);c.attr("readonly",null);c.attr("id","_create_ddl_from_"+a.attr("id"));c.attr("onkeypress","ddlKeyPress(this)");b.find("input:eq(1)").attr("afterEvent","closeDDL");$("body").append(b);b.show();setTimeout(function(){c[0].focus()},500)}function ddlKeyPress(a){setTimeout(function(){a.setAttribute("have",a.value)},11)}
function closeDDL(a,b,c,d){if(""!=a){$(".ewa-ddl-list").hide();var e=$(window.__createDDL);e.val($("#___ewa_ddl input:eq(0)").val());e.next().val($("#___ewa_ddl input:eq(1)").val());e.next().attr("afterEvent")&&eval(e.next().attr("afterEvent"))(a,b,c,d);$("#___ewa_ddl").hide();window.__createDDL=null}}function closeDDL1(){var a=$(window.__createDDL);a.val("");a.next().val("");$("#___ewa_ddl").hide();window.__createDDL=null}
var autoTextarea=function(a,b,c){b=b||0;window.opera&&window.opera.toString().indexOf("Opera");var d=function(h,k){a.addEventListener?a.addEventListener(h,k,!1):a.attachEvent("on"+h,k)},e=function(h){return a.currentStyle?a.currentStyle[h]:getComputedStyle(a,null)[h]},f=parseFloat(function(h){var k=e(h);"height"===h&&1!==k.search(/px/i)&&(h=a.getBoundingClientRect(),k=h.bottom-h.top-parseFloat(e("paddingTop"))-parseFloat(e("paddingBottom"))+"px");console.log(k);return k}("height"));a.style.resize=
"none";var g=function(){var h=a.style;if(a._length!==a.value.length){a._length=a.value.length;var k=document.body.scrollTop||document.documentElement.scrollTop;a.style.height=f+"px";if(a.scrollHeight>f){if(c&&a.scrollHeight>c){var l=c-0;h.overflowY="auto"}else l=a.scrollHeight-0,h.overflowY="hidden";h.height=l+b+"px";k+=parseInt(h.height)-a.currHeight;document.body.scrollTop=k;document.documentElement.scrollTop=k;a.currHeight=parseInt(h.height)}}};d("propertychange",g);d("input",g);d("focus",g);g()};
//# sourceMappingURL=/EmpScriptV2/EWA_STYLE/app2/js/app2.min.js.map
