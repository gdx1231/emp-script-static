var EWA_AppAutoLoginClass=function(b,a,c,d){this.name=b;this.loginUrl=a;this.loginSucess=c;this.loginFail=d;this.lastLoginTime=0;this.autoLogin=function(e){var f=this.getCode();if(!f)return!1;f={code:f,method:"auto_login"};var g=this.loginUrl;if(!g)return console.log("\u6ca1\u6709\u5b9a\u4e49\u81ea\u52a8\u767b\u5f55\u7684url"),!1;var h=this;$JP1(g,f,function(k){h.lastLoginTime=(new Date).getTime();console.log(k);k.RST?(g_is_user_logined=!0,k.CODE&&h.saveCode(k.CODE),h.loginSucess&&h.loginSucess(k)):
(h.removeCode(),h.loginFail&&h.loginFail(k));e&&e(k)});return!0};this.getPastMinutes=function(){return((new Date).getTime()-this.lastLoginTime)/1E3/60};this.getCode=function(){try{return window.localStorage[this.name]}catch(e){console.log(e)}};this.saveCode=function(e){window.localStorage[this.name]=e};this.removeCode=function(){window.localStorage.removeItem(this.name)}},EWA_App={IS_STOP_TOUCH_MOVE:!0,EWA_ROOT:"ewa.jsp",CFGS:null,CFGS_CURRENT:null,IS_IN_WEIXIN:/micromessenger/ig.test(navigator.userAgent),
IS_IN_WEIXIN_MINI:/miniprogram/ig.test(navigator.userAgent),IS_IN_ANDROID:/android/ig.test(navigator.userAgent),IS_IN_IPHONE:/iphone/ig.test(navigator.userAgent),IS_IN_IPAD:/ipad/ig.test(navigator.userAgent),initCfgs:function(b){var a={},c;for(c in b){var d=b[c],e=d.ID;d=this.convertCfg(d);a[e]=d}this.CFGS={INIT:a};__SECTIONS=this.CFGS_CURRENT=a},attatchCfgs:function(b,a){var c={},d;for(d in a){var e=a[d],f=e.ID;e=this.convertCfg(e);c[f]=e;this.CFGS_CURRENT[f]=e}this.CFGS[b]=c;__SECTIONS=this.CFGS_CURRENT},
changeCfgs:function(b){b||="INIT";this.CFGS[b]?__SECTIONS=this.CFGS_CURRENT=this.CFGS[b]:alert(b+"\u7684\u914d\u7f6e\u4fe1\u606f\u4e0d\u5b58\u5728")},convertCfg:function(b){var a={IScroll:1,PageFooter:1,PageHeader:1,Refresh:1,ButtonOnFooter:1,EWA:1,IScrollMore:1},c={Installed:1,Losted:1,RefreshAfter:1,ShowCompleted:1},d={},e;for(e in b){var f=b[e];null!=f&&"string"==typeof f&&(f=f.trim());if(f)if(a[e])d[e]="Y"==f?!0:!1;else if(c[e])try{eval("window.______js="+f),d[e]=window.______js,delete window.______js}catch(g){console.log(g),
console.log(b),console.log(f)}else d[e]=f}return d},log:function(){var b={},a;for(a in arguments){var c=arguments[a];try{var d=JSON.stringify(c)}catch(e){d=e}b["log"+a]=d}$JP2("console.jsp",b,function(){})},getBodySize:function(){let b=!1,a=EWA_App.IS_IN_IPHONE||EWA_App.IS_IN_IPAD?window.innerWidth:document.documentElement.clientWidth,c=EWA_App.IS_IN_IPHONE||EWA_App.IS_IN_IPAD?window.innerHeight:document.documentElement.clientHeight;if(screen.orientation){if(0===screen.orientation.angle||180===screen.orientation.angle)b=
!0;return{width:a,height:c,orientation:b?"v":"h"}}if(this.IS_IN_IPHONE||this.IS_IN_IPAD){if(180===window.orientation||0===window.orientation)b=!0}else b=180===window.orientation||0===window.orientation?!1:!0;return b?{width:a<c?a:c,height:a<c?c:a,orientation:"v"}:{height:a>c?c:a,width:a>c?a:c,orientation:"h"}},changeBodyHeight:function(b,a,c){b||(a=this.getBodySize(),b=a.width,a=a.height);EWA_App.DEBUG&&console.log("changeBodyHeight",b,a,c);$("body").css("height",a).css("width",b);$("section").css("width",
b+"px").attr("aw",b);b>a?$("body").addClass("landscape"):$("body").removeClass("landscape")},start:function(b){if(b)if(__SECTIONS[b]){this.FirstId=b;var a=this;window.addEventListener("orientationchange",function(e){setTimeout(function(){EWA_App.DEBUG&&console.log("orientation:"+window.orientation);var f=a.getBodySize();var g=f.height;(f=f.width)&&g&&EWA_App.changeBodyHeight(f,g,"\u5ef6\u65f61")},501)});this._clientHeight=document.documentElement.clientHeight;window.setInterval(function(){let e=a.getBodySize().height;
a._clientHeight!=e&&(a._clientHeight=e,console.log("\u9ad8\u5ea6\u53d8\u5316\u4e86\uff1a"+e),EWA_App.changeBodyHeight())},1E3);EWA_App.changeBodyHeight();EWA_App.State.init("home");EWA_App.State._is_replace=!0;b="";var c=window.location.href.split("#"),d=c[0];this.ENTRY_URL=d;1<c.length&&(b=c[1],b==this.FirstId&&(b=null));EWA_App.Section.createIScroll($("section#"+this.FirstId)[0],__SECTIONS[this.FirstId]);EWA_App.State.state(__SECTIONS[this.FirstId].Title,d+"#"+this.FirstId);b&&(EWA_App.DEBUG&&console.log("other_id",
b),EWA_App.State.state("",d+"#"+b));EWA_App.startAfter&&EWA_App.startAfter()}else alert(" fristId\u300a\u7b2c\u4e00\u4e2a\u9875\u9762id\u300b\u5bf9\u5e94\u914d\u7f6e\u9879\u4e0d\u5b58\u5728__SECTIONS."+b);else $Tip("\u8bf7\u5b9a\u4e49 fristId\u300a\u7b2c\u4e00\u4e2a\u9875\u9762id\u300b")},SplitEwa:function(b,a,c){b=EWA.F.FOS[b];var d=b.Url,e=new EWA_UrlClass;e.SetUrl(d);e.AddParameter("xmlname",a);e.AddParameter("itemname",c);b.Url=e.GetUrl()},back:function(b){if(b){var a=$(b).attr("t")||0,c=(new Date).getTime();
if(300>c-a)return;$(b).attr("t",c)}var d;EWA_App.SECTION_SHOW&&(d=__SECTIONS[EWA_App.SECTION_SHOW.id]);d&&d.backBeforeEvent&&d.backBeforeEvent();this.backAction=!0;window.history.back();d&&d.backAfterEvent&&d.backAfterEvent()}};
(function(){EWA_App.Ani={DEF_CSS:{INIT:{"-webkit-transform":"translate3d(90%,0,0)"},INIT_BACK:{"-webkit-transform":"translate3d(-90%,0,0)"},HIDE:{"-webkit-transform":"translate3d(-100%, 0, 0)","-webkit-transition":"-webkit-transform 400ms cubic-bezier(0.42, 0, 0.58, 1.0) 0.1s"},SHOW:{"-webkit-transform":"translate3d(0, 0, 0)","-webkit-transition":"-webkit-transform 350ms cubic-bezier(0.42, 0, 0.58, 1.0)"},BACK_HIDE:{"-webkit-transform":"translate3d(100%, 0px, 0px)","-webkit-transition":"-webkit-transform 350ms cubic-bezier(0.42, 0, 0.58, 1.0) 0.1s"},
BACK_SHOW:{"-webkit-transform":"translate3d(0%, 0px, 0px)","-webkit-transition":"-webkit-transform 400ms cubic-bezier(0.42, 0, 0.58, 1.0)"}},POP_CSS:{INIT:{"-webkit-transform":"translate3d(0, 90%, 0)"},INIT_BACK:{"-webkit-transform":"translate3d(0, 0, 0)"},HIDE:{"-webkit-transform":"translate3d(0, 0%, 0)"},SHOW:{"-webkit-transform":"translate3d(0, 0%, 0)","-webkit-transition":"-webkit-transform 350ms cubic-bezier(0.42, 0, 0.58, 1.0)"},BACK_HIDE:{"-webkit-transform":"translate3d(0, 100%, 0px)","-webkit-transition":"-webkit-transform 350ms cubic-bezier(0.42, 0, 0.58, 1.0) 0.1s"},
BACK_SHOW:{"-webkit-transform":"translate3d(0%, 0px, 0px)"}},getCss:function(b){EWA_App.DEBUG&&console.log(b);return"pop"==b?this.POP_CSS:this.DEF_CSS}}})();
EWA_App.LocalStore={name:"EX_APP",getJson:function(){if(this.CFG)return this.CFG;if(window.localStorage[this.name]){var b=window.localStorage[this.name];try{this.CFG=JSON.parse(b)}catch(a){this.CFG={}}}else this.CFG={};return this.CFG},selectCitys:function(){var b=this.getJson();return b.selectCitys?b.selectCitys:[]},addDefaultCity:function(b,a){var c=this.selectCitys();a=[{id:b,text:a}];for(var d=0;d<c.length&&!(10<=a.length);d++){var e=c[d];e.id!=b&&a.push(e)}this.CFG.selectCitys=a;this.save()},
save:function(){window.localStorage[this.name]=JSON.stringify(this.CFG)},addRz:function(b,a){this.getJson().rz={uid:b,code:a};this.save()},loadRz:function(){return this.getJson().rz||{}},removeRz:function(){delete this.getJson().rz;this.save()}};
EWA_App.MonitorRefresh={list:[],add:function(b,a){var c={};c.obj=b;c.h=$(b).height();c.w=$(b).width();c.f=a;this.list.push(c);1==this.list.length&&this.start()},start:function(){var b=this;this.timerHandle=setInterval(function(){b._check()},15)},stop:function(){window.clearInterval(this.timerHandle)},_check:function(){for(var b in this.list){var a=this.list[b];null!=a&&$("section#"+a)}}};
EWA_App.MonitorResize={list:[],add:function(b,a){var c={};c.obj=b;c.h=$(b).height();c.w=$(b).width();c.f=a;this.list.push(c);1==this.list.length&&this.start()},start:function(){this.timerHandle=setInterval(function(){EWA_App.MonitorResize._check()},15)},stop:function(){window.clearInterval(this.timerHandle)},_check:function(){var b=(new Date).getTime(),a;for(a in this.list){var c=this.list[a];if(null!=c){if(!document.contains(c.obj)){c.obj=null;this.list[a]=null;break}var d=$(c.obj).width(),e=$(c.obj).height();
if(d!=c.w||e!=c.h)c.ow=c.w,c.oh=c.h,c.w=d,c.h=e,c.f&&c.f(c,b)}}}};
EWA_App.PicsViewer={IPHONE:navigator.userAgent.toLowerCase().match(/cpu iphone os (\d+)_(\d+) like/),IS_DEBUG:!1,IS_IN_IOS_NATIVE_APP:0<navigator.userAgent.toLowerCase().indexOf("/classroom"),IS_IN_WEIXIN:0<navigator.userAgent.toLowerCase().indexOf("micromessenger"),IS_MINIPROGRAM:0<navigator.userAgent.toLowerCase().indexOf("miniprogram"),collect:function(){this.FILE_META?this.collectCallback?this.collectCallback(this.FILE_META):console.warn("collectCallback: "+this.FILE_META):alert("\u6ca1\u6709\u6587\u4ef6\u53ef\u4ee5\u6536\u85cf")},
timeline:function(){this.FILE_META?this.shareToWeiXin(this.FILE_META,"timeline"):alert("\u6ca1\u6709\u6587\u4ef6\u53ef\u4ee5\u5206\u4eab")},re:function(){this.FILE_META?this.shareToWeiXin(this.FILE_META,"session"):alert("\u6ca1\u6709\u6587\u4ef6\u53ef\u4ee5\u8f6c\u53d1")},share:function(){if(this.FILE_META){var b=this.BOX.find("tr.ewa-lf-data-row")[0];EWA_App.Section.showLfMenus(b,"EWA_App.PicsViewer.Share")}else alert("\u6ca1\u6709\u6587\u4ef6\u53ef\u4ee5\u5206\u4eab")},shareToWeiXin:function(b,
a){var c=location.protocol+"//"+location.host+(location.port?":"+location.port:""),d=window.location.pathname.substring(0,location.pathname.lastIndexOf("/"))+"/";if(this.IS_IN_IOS_NATIVE_APP)if("pic"==b.CMD){var e=c+(b.URL.startsWith("/")?"":d)+b.URL;e=0<e.indexOf("?")?e+"&DOWNLOAD=1":e+"?DOWNLOAD=1";this.shareToWxCommand(a,"pic",null,null,null,e,null)}else e=c+(b.DOWNLOAD_URL.startsWith("/")?"":d)+b.DOWNLOAD_URL,c=c+(b.ICON.startsWith("/")?"":d)+b.ICON,this.shareToWxCommand(a,"link",b.NAME,b.DES,
e,null,c);else this.IS_IN_WEIXIN?(this.FILE_META=b,"session"==a?this.createWx_onMenuShareAppMessage():this.createWx_onMenuShareTimeline()):$Tip("\u53ea\u80fd\u5728\u5fae\u4fe1\u516c\u4f17\u53f7\u548cApp\u4e0b\u8fdb\u884c\u64cd\u4f5c")},shareToWxCommand:function(b,a,c,d,e,f,g){var h=(new Date).getTime();1E3>h-(this.asldfskfsldfksdlfksldkfsldjdfnkvndfkj||0)||(this.asldfskfsldfksdlfksldkfsldjdfnkvndfkj=h,h=[],h.push("cmd="+a),c&&h.push("title="+c.toURL()),d&&h.push("description="+d.toURL()),g&&h.push("icon="+
g.toURL()),e&&h.push("url="+e.toURL()),f&&h.push("dataUrl="+f.toURL()),a=h.join("&"),b="gdx://weixinshare/"+b+"?"+a,$("#asdadsadas").text(b),loadNativeURL(b))},showFile:function(b){this._init();if(b){this.FILE_URL=b;$("#bbs-pic-view-file").html("<div style='text-align: center'>\u8bf7\u7b49\u5f85\u52a0\u8f7d\u6587\u4ef6...</div>");window.FILE_META=null;var a=this;$Install(b,"bbs-pic-view-file",function(){window.FILE_META&&(a.FILE_META=window.FILE_META,a.createWx_onMenuShareAppMessage(),a.createWx_onMenuShareTimeline(),
window.FILE_META=null)});this.BOX.find("#page").hide();this.BOX.find("#page1").hide();this.BOX.show()}},createWx_onMenuShareTimeline:function(){if(window.wx&&wx.onMenuShareAppMessage){var b=location.protocol+"//"+location.hostname;location.port&&(b+=":"+location.port);wx.onMenuShareTimeline({title:this.FILE_META.NAME,link:b+this.FILE_META.DOWNLOAD_URL,imgUrl:b+this.FILE_META.ICON,success:function(){},cancel:function(){}})}},createWx_onMenuShareAppMessage:function(){if(window.wx&&wx.onMenuShareAppMessage){var b=
location.protocol+"//"+location.hostname;location.port&&(b+=":"+location.port);wx.onMenuShareAppMessage({title:this.FILE_META.NAME,desc:this.FILE_META.DES,link:b+this.FILE_META.DOWNLOAD_URL,imgUrl:b+this.FILE_META.ICON,type:"",dataUrl:"",success:function(){},cancel:function(){}})}},showPics:function(b,a){this._init();if(b){this.FILE_URL=b;this.FILE_META={CMD:"pic",URL:b};$("#bbs-pic-view-file").html("");this.BOX.find("#page").show();var c=[],d=[],e=1;a=a?a:0;0>a&&(a=0);if(b instanceof Array){if(0==
b.length)return;e=b.length;a>e-1&&(a=e-1);for(var f in b){c.push(this._createImg(f,b[f],a));if(f==a){var g="<b id='idx_"+f+"' class='cur' >&bull; </b>";this.FILE_META.URL=b[f]}else g="<b id='idx_"+f+"'>&bull; </b>";d.push(g)}}else c.push(this._createImg(0,b,a));this.BOX.find("#page tr").html(c.join(""));1==e?this.BOX.find("#page1").hide():(this.BOX.find("#page1").show(),this.BOX.find("#page1 td").html(d.join("")));this.BOX.show()}},hide:function(){this.BOX.hide()},_createImg:function(b,a,c){c=c?c:
0;var d=["<td class='list0' [SSTT] align=\"center\"><img class='imga' onload='EWA_App.PicsViewer._setImg(this)' "];d.push(" id='img_"+b+"' ");b==c?d.push(' src="'+a+'" '):d.push(' src1="'+a+'" ');d.push("></td>");a=d.join("");return a=a.replace("[SSTT]",b==c?"":"style='display:none' ")},_setImg:function(b){$(b).attr("mw",b.width).attr("mh",b.height).css("width",b.width).css("height",b.height).css("margin-left",0).css("margin-top","0");$(b).removeClass("imga")},_changePhoto:function(b){var a=this.BOX.find("#img_"+
b);if(a.attr("src1"))a.attr("src",a.attr("src1")),a.attr("scr1",""),a[0].setAttribute("src1","");else try{if(a.attr("mw")){var c=1*a.attr("mw");a.attr("mh");a.css("width",c).css("height".mh).css("margin-left",0).css("margin-top",0)}}catch(d){console.log(d)}a.parent().show();this.BOX.find("#idx_"+b).addClass("cur")},_init:function(){if(this.BOX)return this.BOX;var b=[];b.push('<div id="bbs-pic-view-box" style="display:none">');b.push('<div id="bbs-pic-view-box1">');b.push("<div id='bbs-pic-view-file' style='height:100%;'></div>");
b.push('<div class="view-large-image">');b.push('<table id="page" class="page " cellspacing="0" cellpadding="0">');b.push("<tr id='bbs-pic-view-box-page-imgs'>");b.push("\x3c!-- imgs --\x3e");b.push("</tr>");b.push("</table>");b.push('<table id="page1" style="display: none">');b.push("<tr>");b.push('<td height="30" align="center" id=\'page1-indexes\'></td>');b.push("</tr>");b.push("</table>");b.push("</div>");b.push("</div>");b.push("<a href='javascript:EWA_App.PicsViewer.hide();' class=\"fa fa-close close\"></a>");
b.push("<a href='javascript:EWA_App.PicsViewer.share();' class='bbs-pic-view-share fa fa-share-alt'></a>");b.push("<table><tr class='ewa-lf-data-row'><td><input id='session' type=button onclick='EWA_App.PicsViewer.re()' value='\u8f6c\u53d1\u7ed9\u670b\u53cb'><input id='timeline' type=button onclick='EWA_App.PicsViewer.timeline()' value='\u5206\u4eab\u670b\u53cb\u5708'></td></tr></table>");b.push("</div>");b=$(b.join(""));$("body").append(b);this.BOX=b;b=b.find("#page")[0];var a=this;b.ontouchstart=
function(c){1==c.targetTouches.length?a.t_start=c:2==c.targetTouches.length&&(a.t_start1=c,a.dist_base=0);a.is_move=!1;c.preventDefault();c.stopPropagation()};b.ontouchmove=function(c){if(2==c.targetTouches.length){a.t_start1a=c;var d=c.targetTouches[0].pageX-a.t_start1.pageX,e=c.targetTouches[0].pageY-a.t_start1.pageY,f=c.targetTouches[1].pageX-a.t_start1.pageX,g=c.targetTouches[1].pageY-a.t_start1.pageY;e=Math.sqrt((d-f)*(d-f)+(e-g)*(e-g));if(0!=a.dist_base){d=e/a.dist_base;f=1*$(c.target).attr("mw");
g=1*$(c.target).attr("mh");var h=$(c.target).width(),k=$(c.target).height();h*=d;k*=d;h<f&&(h=f,k=g,d=0);$(c.target).css("width",h).css("height",k).attr("r",d);0==d&&$(c.target).css("margin-left",0).css("margin-top","0")}a.dist_base=e}else if(1==c.targetTouches.length){d=$(c.target).attr("r");if(null==d||0==d)return;a.t_start||(a.t_start=c);d=c.pageX-a.t_start.pageX;e=c.pageY-a.t_start.pageY;g=1*$(c.target).css("margin-left").replace("px","");f=1*$(c.target).css("margin-top").replace("px","");d=g+
d;e=f+e;$(c.target).css("margin-left",d).css("margin-top",e);a.t_start=c;a.is_move=!0}c.preventDefault();c.stopPropagation()};b.ontouchend=function(c){c.preventDefault();c.stopPropagation();if(a.t_start){var d=c.pageX-a.t_start.pageX;c=c.timeStamp-a.t_start.timeStamp;-50>d&&244>c?(d=a.BOX.find(".cur"),c=d.attr("id"),c=1*c.replace("idx_",""),d.removeClass("cur"),a.BOX.find("#img_"+c).parent().hide(),d=a.BOX.find(".page img"),c++,c==d.length&&(c=0),a._changePhoto(c)):50<d&&244>c&&(d=a.BOX.find(".cur"),
c=d.attr("id"),c=1*c.replace("idx_",""),d.removeClass("cur"),a.BOX.find("#img_"+c).parent().hide(),d=a.BOX.find(".page img"),c--,0>c&&(c=d.length-1),a._changePhoto(c))}a.t_start=null;a.t_start1=null}}};
EWA_App.Section={IS_WEIXIN:0<navigator.appVersion.toLowerCase().indexOf("micromessenger"),handleState:function(b){if(null!=b){var a=b.url;a&&(a=this.getParas(a),a.section_id&&this.cover(EWA_App.State.prevShow,$("section[id="+a.section_id+"]")[0],a,b._is_back))}},getParas:function(b){var a=b.split("#"),c={};if(1==a.length)return{url:b};c.url=a[0];b=a[1].split("?");c.section_id=b[0];if(2==b.length){b=b[1].split("&");a={};for(var d in b){var e=b[d].split("=");2==e.length&&(a[e[0].unURL()]=e[1].unURL())}c.paras=
a}this.createSection(c);return c},createSection:function(b){b=b.section_id;var a=__SECTIONS[b];a&&a.swap&&"pop"==a.swap.toLowerCase().trim()&&$("section[id="+b+"]").remove();if(0==$("section[id="+b+"]").length)if(a=__SECTIONS[b],null==a)console.log(b+" not defined");else{var c=a.Css?a.Css:"";"Y"==a.USE_EWA_LF&&(c+=" ewa-app-use-ewa-lf");"pop"==a.swap&&(c+=" ewa-app-pop");c=['<section style="display1:none" class="'+c.trim()+'" id="'+b+'">'];EWA_App.IS_IN_WEIXIN&&!EWA_App.IS_IN_WEIXIN_MINI&&(a.PageHeader=
!1);a.PageHeader&&a.PageFooter?c.push("<header><h1></h1></header><div class='content'></div><footer></footer>"):a.PageHeader&&!a.PageFooter?c.push("<header><h1></h1></header><div class='content'></div>"):!a.PageHeader&&a.PageFooter?c.push("<div class='content'></div><footer></footer>"):c.push('<div class="content"></div>');c.push("<div class='ewa-app-btn ewa-app-btn-back' onclick='EWA_App.back();'></div>");c.push("<div class='ewa-app-btn ewa-app-btn-add'><a></a></div>");c.push("<div class='ewa-app-btn ewa-app-btn-more'><a></a></div>");
c.push("</section>");$("body").append(c.join(""));"init"==a.Footer?(b=$("section[id="+b+"] footer"),b.html($("section:eq(1) footer").html()),b.find("a").removeAttr("ckjs")):a.Footer&&(a=$('section[id="'+a.Footer+'"] footer'),1==a.length&&(b=$("section[id="+b+"] footer"),b.html(a.html()),b.find("a").removeAttr("ckjs")))}},_getRequestUrl:function(b,a){var c=EWA_App.CFGS_CURRENT.ewa;0==b.ID.indexOf("ewa")?EWA_App.SECTION_HIDE&&(b.CONTENT_PATH=EWA_App.CFGS_CURRENT[EWA_App.SECTION_HIDE.id].CONTENT_PATH):
b.CONTENT_PATH?(EWA_App.EWA_ROOT_INIT||(EWA_App.EWA_ROOT_INIT=EWA_App.EWA_ROOT,EWA.CP=b.CONTENT_PATH+"../"),EWA_App.EWA_ROOT=b.CONTENT_PATH+EWA_App.EWA_ROOT_INIT,c.CONTENT_PATH||(c.CONTENT_PATH=b.CONTENT_PATH,c.CONTENT_PATH_CHANGED=!0)):EWA_App.EWA_ROOT_INIT&&(EWA_App.EWA_ROOT=EWA_App.EWA_ROOT_INIT,EWA_App.EWA_ROOT_INIT=null,EWA.CP_INIT=null,c.CONTENT_PATH_CHANGED&&(c.CONTENT_PATH=null,c.CONTENT_PATH_CHANGED=null));if(b.EWA){c=b.X instanceof Array?b.X.join(","):b.X;var d=b.I instanceof Array?b.I.join(","):
b.I;d=EWA_App.EWA_ROOT+"?add_div=1&xmlname="+c+"&itemname="+d+"&EWA_APP=1"}else d=b.U,!b.CONTENT_PATH||d.startsWith("/")||d.startsWith("http")||(d=b.CONTENT_PATH+d);c=new EWA_UrlClass;c.SetUrl(d);d=new EWA_UrlClass;for(var e in d._Paras)c.AddParameter(e,d._Paras[e]);if(b.AddParas)for(e in b.AddParas)c.AddParameter(e,b.AddParas[e]);if(b._paras)for(e in b._paras)c.AddParameter(e,b._paras[e]);!c.GetParameter("EWA_LANG")&&EWA.LANG&&c.AddParameter("EWA_LANG",EWA.LANG);d=c.AddParameter("section",a);EWA_App.DEBUG&&
console.log(d);return d},getEWAS:function(){var b=[];$(EWA_App.SECTION_SHOW).find(".EWA_TABLE").each(function(){var a=$(this).attr("id");a&&(a=a.replace("EWA_FRAME_","").replace("EWA_LF_",""),(a=EWA.F.FOS[a])&&b.push(a))});return b},loadMore:function(b){var a=$(EWA_App.SECTION_SHOW).attr("id"),c=__SECTIONS[a];if(!c._is_reloadding){c._is_reloadding=!0;EWA_App.DEBUG&&console.log("reload more id ="+a);c.loaded=!0;a=c._ewa_load_more_obj;if(null==a||0==a.parent().length||0==a.parent().parent().length){a=
$(EWA_App.SECTION_SHOW).find(".ewa-lf-frame[id]");0==a.length&&(is_lf_call=!1,a=$(EWA_App.SECTION_SHOW).find(".ewa-grid-frame[id]"));if(0==a.length){console.log("loadMore ewa_obj ? (listframe or grid)");return}if(1<a.length)for(var d=0;d<a.length;d++){var e=a[d];if(""!=e.id){a=$(e);break}}EWA_App.DEBUG&&console.log(a[0]);c._ewa_load_more_obj=a}d=a.attr("id");d=d.replace("EWA_LF_","");var f=EWA.F.FOS[d];if(f)if(a=a.parent(),f._PageCurrent++,f._PageCurrent>f._PageCount)f._PageCurrent--,c._is_reloadding=
!1,a=!0,c.noMoreData?a=c.noMoreData():b||$Tip("\u6ca1\u6709\u66f4\u591a\u7684\u6570\u636e"),a&&($(c.myScroll.wrapper).removeClass("loadingmore"),$(c.myScroll.scroller).removeClass("loadingmore-scroller").css("margin-top",""));else{b=EWA_Utils.tempId("_sc_");a.append('<div id="'+b+'"></div>');a=new EWA_UrlClass(f.Url);a.AddParameter("EWA_PAGECUR",f._PageCurrent);a.AddParameter("EWA_PAGESIZE",f._PageSize);a.AddParameter("EWA_AJAX","LF_RELOAD");a.AddParameter("EWA_IS_SPLIT_PAGE","no");a.AddParameter("EWA_IS_HIDDEN_CAPTION",
"yes");(d=f.SearchGetExp(EWA_App.SECTION_SHOW))&&a.AddParameter("EWA_LF_SEARCH",d);f._Sort&&a.AddParameter("EWA_LF_ORDER",f._Sort);a=a.GetUrl();var g=this;(new EWA_AjaxClass).Install(a,"",b,function(){c._is_reloadding=!1;f.ReloadAfter&&f.ReloadAfter();c.myScroll&&c.myScroll.refresh();g.listFrameUIAndEvents(f)},!0)}else console.log("ewa["+d+"] ?"),c._is_reloadding=!1}},reload:function(){var b=$(EWA_App.SECTION_SHOW);if(0!=b.length){var a=b.attr("id"),c=__SECTIONS[a];if(!c._is_reloadding){c._is_reloadding=
!0;EWA_App.DEBUG&&console.log("reload id ="+a);c.myScroll&&$(c.myScroll.wrapper).addClass("reloading");c.loaded=!0;var d=b.find(".content");d.attr("id")||d.attr("id",EWA_Utils.tempId("_sc_"));var e=this;a=$(EWA_App.SECTION_SHOW).find(".ewa-lf-frame[id]");0==a.length&&(is_lf_call=!1,a=$(EWA_App.SECTION_SHOW).find(".ewa-grid-frame[id]"));if(0==a.length)console.log("loadMore ewa_obj ? (listframe or grid)");else{if(1<a.length)for(var f=0;f<a.length;f++){var g=a[f];if(""!=g.id){a=$(g);break}}a=a.attr("id");
a=a.replace("EWA_LF_","");var h=EWA.F.FOS[a];a=h.Url;h._PageCurrent=1;(f=h.SearchGetExp(EWA_App.SECTION_SHOW))&&(a+="&EWA_LF_SEARCH="+f.toURL());h._Sort&&(a+="&EWA_LF_ORDER="+h._Sort.toURL());h.Url=a+"&EWA_PAGECUR=1";h.ReloadAfter&&(h.__ReloadAfter=h.ReloadAfter);h.ReloadAfter=function(){h.__ReloadAfter&&(h.__ReloadAfter(),h.ReloadAfter=h.__ReloadAfter);e.ajaxLoadedAfter(b,b,c,d,!1,!0);c.myScroll&&$(c.myScroll.wrapper).animate({"padding-top":0},521,function(){$(this).removeClass("reloading").css("padding-top",
"")});c._is_reloadding=!1;h.ReloadAfter=h.__ReloadAfter?h.__ReloadAfter:null};h.Reload()}}}},showCoverDiv:function(){this._COVER&&document.contains(this._COVER[0])||(this._COVER=$('<div id="showCoverDiv" ontouchmove="return false;" style="z-index:981281;position:absolute;top:0;left:0;bottom:0;right:0;"></div>'),$("body").append(this._COVER));this._COVER.show()},hideCoverDiv:function(){this._COVER&&this._COVER.hide()},cover:function(b,a,c,d){a.id||(a.id=EWA_Utils.tempId("_show_"));EWA_App.State.prevShow=
a;var e=c?c.section_id:"-------";EWA_App.SECTION_SHOW=a;EWA_App.SECTION_HIDE=b;EWA_App.SECTION_URLS=c;EWA_App.SECTION_IS_BACK=d;b&&__SECTIONS[b.id]&&__SECTIONS[b.id].myScroll&&(__SECTIONS[b.id]._LastScrollY=__SECTIONS[b.id].myScroll.y,EWA_App.DEBUG&&console.log("\u8bb0\u5f55\u4f4d\u7f6e ["+b.id+"] ->"+__SECTIONS[b.id]._LastScrollY));EWA.CP_INIT||(EWA.CP_INIT=EWA.CP);var f=__SECTIONS[e];if(f){f.CONTENT_PATH?EWA.CP=f.CONTENT_PATH+"../":EWA.CP_INIT&&(EWA.CP=EWA.CP_INIT);EWA_App.DEBUG&&console.log("EWA.CP ="+
EWA.CP);this.showCoverDiv();f.Title&&$(a).find("header h1").html(f.Title);var g=!1;if(d)f.RefreshBackAction&&(g=!0);else if(!f.loaded||f.Refresh)g=!0;var h=$(a).find(".content");0==h.children().length&&(g=!0);if(g){f.loaded=!0;EWA_App.DEBUG&&console.log("cover->clear content!");h.html("");h.attr("id")||h.attr("id",EWA_Utils.tempId("_sc_"));f._paras=c.paras;var k=this._getRequestUrl(f,e);c=new EWA_AjaxClass;var l=this;l._is_ajax_loading=!0;$Tip("enus"==EWA.LANG?"Loading":"\u6570\u636e\u52a0\u8f7d\u4e2d",
function(){return!l._is_ajax_loading});c.Install(k,"",h[0].id,function(){EWA_App.DEBUG&&console.log("cover->AJAX INSTALL:"+k);l.ajaxLoadedAfter(b,a,f,h,d)});return}EWA_App.DEBUG&&console.log("\u4e0d\u5237\u65b0",f,d);this.hideCoverDiv();null!=f._LastScrollY&&f.myScroll&&(f.myScroll.scrollTo(0,f._LastScrollY),EWA_App.DEBUG&&(console.log("\u6062\u590d\u4f4d\u7f6e ["+f.ID+"] ->"+f._LastScrollY),f._LastScrollY=null))}this.swapPage(b,a,d);this.hideCoverDiv()},showOrders:function(b){b||(b=EWA_App.SECTION_SHOW.id);
b=$("section#"+b).find(".ewa-lf-header:eq(0)");if(0!=b.length){var a=0;b.find("td").each(function(){if(0==$(this).find("a").length)$(this).remove();else{var d=$(this).text();$(this).attr("order-index",a).addClass("ewa-app-lf-order");d.endsWith(" ^")?(d=d.replace(" ^","").trim(),$(this).find("a").addClass("asc").text(d)):d.endsWith(" v")&&(d=d.replace(" v","").trim(),$(this).find("a").addClass("desc").text(d));a++}});if(0!=a){5<a&&(a=5);var c={width:100/a+"%"};b.find("td.ewa-app-lf-order").css(c);
b.css("display","block").css("width","100%");return b}}},reShowFilter:function(b,a,c){b||(b=EWA_App.SECTION_SHOW.id);var d=$("section#"+b+" .ewa-lf-search");if(0!=d.length&&!d.attr("reshowfilter")){a||d.css("position","absolute").css("top",0).css("left",0);a||(setTimeout(function(){$("section#"+b+">.content>.iscroller").css("padding-top",d.height()).css("padding-bottom",d.height()+50);__SECTIONS[b].myScroll&&__SECTIONS[b].myScroll.refresh()},310),$("section#"+b+">.content").append(d));$("section#"+
b+" .ewa-lf-search-item-title").hide();var e=[];$("section#"+b+" .ewa-lf-search-item").each(function(){$(this).find("a").remove();var q=$(this).find(".ewa-lf-search-item-title").text();$(this).find("input[type=text]").each(function(){$(this).attr("onclick")&&0<=$(this).attr("onclick").indexOf("EWA.UI.Calendar.Pop")?$(this).attr("onclick","").attr("type","date"):$(this).attr("placeholder",q)});var n=!1;$(this).find("select").each(function(){this.options[0].text="-- "+q+" --";this.options[0].value=
"";n=!0});n&&e.push(this)});if(1<e.length){a=document.createElement("table");for(var f=100/e.length,g=a.insertRow(-1),h=e[0].parentNode,k=0;k<e.length;k++){var l=g.insertCell(-1);l.style.width=f+"px";l.style.padding=0;l.appendChild(e[k])}a.style.width="100%";a.cellPadding=0;a.cellSpacing=0;h.appendChild(a)}if(!c){var p=[],m=[];c=$("section#"+b+" .ewa-lf-search-type-text");0<c.length&&(c.each(function(q){var n=$(this).find(".ewa-lf-search-item-title").text();n=n.replace(":","").replace("\uff1a","");
var t=$(this).find("input[type=text]").attr("name");p.push(n);m.push(t);0<q&&$(this).hide()}),$(c[0]).addClass("ewa-app-lf-search-compose"),$(c[0]).find("input[type=text]").attr("name",m.join(",")).attr("placeholder",p.join(", ")))}var r=this;d.find(".ewa-lf-search-fix-m1").bind("click",function(){r.showOptionsOnLfMenu(this)});d.attr("reshowfilter",1)}},beautfyFilter:function(b){b=b?$(b):$("section#"+EWA_App.SECTION_SHOW.id+" .ewa-lf-search");0==b.length||b.attr("beautfyFilter")||(b.attr("beautfyFilter",
1),b.find(".ewa-lf-search-item").each(function(){var a=$(this).find(".ewa-lf-search-item-title");a.hide();var c=a.text().replace(":","");a=$(this).find(".ewa-lf-search-item-ctl input");0<a.length?(a.each(function(){$(this).attr("onclick")&&0<=$(this).attr("onclick").indexOf("EWA.UI.Calendar.Pop")&&$(this).attr("onclick","").attr("type","date")}),a.attr("placeholder",c),1==a.length&&$(this).addClass("ewa-app-lf-search-compose")):$(this).find("select").each(function(){this.options[0].text="-- "+c+" --";
this.options[0].value=""})}))},showOptionsOnLfMenu:function(b){var a=[],c={};$(b).find("input").each(function(){this.checked&&(c[this.id]=!0);var e=$(this);e={txt:this.parentNode.outerHTML,js11:"$('#"+e.attr("id")+"').trigger('click');return;",js:" ",notclose:!0};a.push(e)});var d=this;this.showLfMenuBox(a).find("input").each(function(){c[this.id]&&(this.checked=!0);d.reShowRadio(this)})},radioClick:function(b){var a=$(b).attr("last_t")||0,c=(new Date).getTime();if(!(500>c-a))if($(b).attr("last_t",
c),c=$(b).attr("rid"),a=$(EWA_App.SECTION_SHOW).find("input[id='"+c+"']"),0==a.length)console.log("radioClick",c,"not found");else if(a=a[0],"radio"==a.type?(c=a.name,$(EWA_App.SECTION_SHOW).find('input[type=radio][name="'+c+'"]').each(function(){$(this).parent().find("i.ewa-app-radio").removeClass("fa-check");$(this).parent().removeClass("ewa-app-radio-checked")}),a.checked=!0):a.checked=!a.checked,a.checked?($(a).parent().addClass("ewa-app-radio-checked"),$(b).find("i").addClass("fa-check")):($(a).parent().removeClass("ewa-app-radio-checked"),
$(b).find("i").removeClass("fa-check")),a.onclick)a.onclick()},reShowRadios:function(b){var a=this;(b?$(b):$(EWA_App.SECTION_SHOW)).find(".ewa-frame").find("input[type=radio],input[type=checkbox]").each(function(){a.reShowRadio(this)})},reShowRadio:function(b){var a=$(b);if(0!=a.length)if(a.attr("reshowradio")){var c=$('a.ewa-app-radio-box[rid="'+b.id+'"]');b.checked?$(c).find("i").addClass("fa-check"):$(c).find("i").removeClass("fa-check")}else{b=a[0];var d=a.attr("id");d||(d=EWA_Utils.tempId("reShowRadio"),
a.attr("id",d));var e=a.parent(),f=e.find('label[for="'+d+'"]'),g=0==f.length?"":f.html();c=document.createElement("a");c.className="ewa-app-radio-box";e.append(c);e='<i class="ewa-app-radio '+a[0].type+' fa"></i><span class="ewa-app-radio-text">'+g+"</span>";$(c).html(e);$(c).attr("onclick","EWA_App.Section.radioClick(this)");$(c).attr("rid",d);$(c).attr("rname",this.name);b.checked&&$(c).find("i").addClass("fa fa-check");a.hide();a.attr("reshowradio","yes");f.hide()}},showLfMenus:function(b,a){if(a=
b){if(!("TR"==a.tagName&&0<=a.className.indexOf("ewa-lf-data-row")||(a=$(a).parentsUntil("tr.ewa-lf-data-row").last().parent()[0],"TR"==a.tagName&&0<=a.className.indexOf("ewa-lf-data-row")))){alert("\u627e\u4e0d\u5230\u5bf9\u5e94\u7684TR\uff08ewa-lf-data-row\uff09");return}var c=EWA_Utils.tempId("ewa-app-lf-menu-trigger");$(a).parent().find(".ewa-app-lf-menu-trigger").removeClass("ewa-app-lf-menu-trigger");$(b).addClass("ewa-app-lf-menu-trigger").attr("tgid",c);var d=$(EWA_App.SECTION_SHOW).attr("id"),
e=[];$(a).find("input[type=button]").each(function(){var f=$(this).attr("ewa_click");f||=$(this).attr("onclick");var g="butFlow"==$(this).attr("ewa_tag");if(f)if(0<=f.indexOf("EWA.UI.Dialog.OpenReloadClose"))f=f.replace("EWA.UI.Dialog.OpenReloadClose","EWA_App.Section.fake_EWA_UI_Dialog_OpenReloadClose"),f=eval(f)+"&EWA_APP_FROM_SECTION_ID="+d+(g?"&isflow=1":""),f={txt:$(this).val(),href:f};else{if(0<f.indexOf("this")&&(g=EWA_Utils.tempId("_ref_"),$(this).attr("ewa_app_ref_id",g),f=f.replace("this",
"$('input[ewa_app_ref_id="+g+"]')[0]")),f={txt:$(this).val(),js:f},g=$(this).attr("data-href"))f.href=g}else g=EWA_Utils.tempId("_ref_"),$(this).attr("ewa_app_ref_id",g),f="$('input[ewa_app_ref_id="+g+"]').trigger('click')",f={txt:$(this).val(),js:f};e.push(f);f.id=this.id});EWA_App.DEBUG&&console.log(e);this.showLfMenuBox(e,"$('a[tgid="+c+"]').removeClass('ewa-app-lf-menu-trigger');")}else alert("\u4f20\u5165\u7684\u5bf9\u8c61\u4e3a\u7a7a")},showLfMenuBox:function(b,a){var c=[];a=(a||"")+";$(this).parent().parent().hide();";
var d=6<b.length,e;for(e in b){var f=b[e],g=f.js,h=f.href,k="<a ";d&&(k+=' style="width:50%;float:left;"');k+=" class='ewa-app-lf-menu-item ref-id-"+f.id+" ";if(h)k+=" href' href='"+h+"' onclick=\""+a+'">';else if(g)g=g.replace(/"/gi,"&quot;"),k=f.notclose?k+(" js' onclick=\""+g+'; ">'):k+(" js' onclick=\""+g+"; "+a+'">');else{EWA_App.DEBUG&&console.log("not ",f);continue}k+=f.txt+"</a>";c.push(k)}(b=$X("___ewa_lf_menu"))?(b=$(b),b.find("i").attr("onclick",a)):(window._EWA_UI_DIALOG_COVERINDEX=1231,
b=document.createElement("div"),b.id="___ewa_lf_menu",b.className="ewa-ddl-box ewa-frame ewa-app-lf-menu",b.innerHTML="<div class='ewa-ddl-box-content'></div><span><i onclick=\""+a+"\" class='fa fa-close'></i></span>",document.body.appendChild(b),b=$("#___ewa_lf_menu"));c=c.join("");b.find(".ewa-ddl-box-content").html(c);var l=this;b.find("a.href").each(function(){l.bindAEvent(this)});b.css("bottom",-200).show();b.animate({bottom:0},200,"swing");return b},lazyload:function(b){if(!b&&EWA_App.SECTION_SHOW){var a=
__SECTIONS[EWA_App.SECTION_SHOW.id];a&&(b=a.myScroll)}if(b){var c=document.documentElement.clientHeight-100;$(b.scroller).find(".EWA_GRID_BG_IMG[is_lazy_load=true]").each(function(){var d=$(this);if(d.offset().top<c){d.removeAttr("is_lazy_load");var e=d.attr("ori_src");d.css("background-image",'url("'+e+'")')}});$(b.scroller).find(".cover").each(function(){var d=$(this);if(!d.attr("lazyloaded")){var e=d.offset().top;e<c&&0<=e&&(d.attr("lazyloaded",1),e=d.attr("backgroundimage"),d.attr("backgroundimage1",
e),e&&(0>e.indexOf("url(")&&(e='url("'+e+'")'),d.css("background-image",e)))}});$(b.scroller).find("img[is_lazy_load]").each(function(){var d=$(this);if(!d.attr("lazyloaded")){var e=d.offset().top;e<c&&0<=e&&(d.attr("lazyloaded",1),d.removeAttr("is_lazy_load"),(e=d.attr("lazy"))&&d.attr("src",e))}})}},checkIsChromePassive:function(){if(void 0===this.__is_supportsPassive){var b=!1;if(EWA.B.IS_ANDROID){try{var a=Object.defineProperty({},"passive",{get:function(){b=!0}});window.addEventListener("test",
null,a)}catch(c){}this.__is_supportsPassive=b;EWA_App.DEBUG&&console.log(this.__is_supportsPassive)}}return this.__is_supportsPassive},createIScroll:function(b,a){EWA_App.IS_STOP_TOUCH_MOVE=!0;var c={click:!0,probeType:3,scrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0},d=$(b).find(".content");if(0==d.length)console.log("\u521b\u5efaIScroll\u9519\u8bef, content\u4e3a\u7a7a",a.ID);else{d=d[0];try{a.myScroll=new IScroll(d,c)}catch(g){console.log("\u521b\u5efaIScroll\u9519\u8bef",$(b).id,g);
return}a._ewa_load_more_obj=null;a.myScroll._events.scroll=[];if(1<$(b).find(".cover").length||$(b).find(".EWA_GRID_BG_IMG[is_lazy_load=true]"))$(b).find(".cover").each(function(){if(!$(this).attr("lazyloaded")){var g=$(this).css("background-image");g&&"none"!=g&&$(this).css("background-image","none").attr("backgroundimage",g)}}),a.myScroll._events.scroll.push(function(){EWA_App.Section.lazyload(this)}),setTimeout(function(){EWA_App.Section.lazyload(a.myScroll)},121);a.myScroll._events.scrollEnd=
[function(){$(EWA_App.SECTION_SHOW).find(".iScrollLoneScrollbar").animate({opacity:0},10)}];a.myScroll._events.scrollStart=[function(){$(EWA_App.SECTION_SHOW).find(".iScrollLoneScrollbar").animate({opacity:.5},10)}];c=a.myScroll.scroller;if(a.IScrollScale){var e=$(b).find(a.IScrollScale);if(0==e.length){EWA_App.DEBUG&&console.log(a.IScrollScale+" not defined (IScrollScale)");return}$(b).addClass("ewa-app-iscrollscale");$(b).attr("IScrollScale",a.IScrollScale);e.addClass("ewa-app-iscrollscale-target");
$(b).find(".content:eq(0)").append(e);var f=e.height();a.myScroll._events.scroll.push(function(){if(!(0>this.y&&0>this.distY)){var g=1+this.distY/(3*f);1>g||e.attr("a")==g||e.css("transform","scale("+g+")").css("transition-duration","0s").attr("a",g)}});a.myScroll.gdxScrollEnd=function(){e.attr("a")?e.css("transform","scale(1)").css("transition-duration","0.6s"):e.attr("a",null)}}a.myScroll.gdxScrollEnd1=function(g){if(!(655<g.timeStamp-this.startTime||140<Math.abs(this.distY)||100>Math.abs(this.distX)))if(0>
this.distX)if(null!=g.target&&g.target.getAttribute("delete")){var h=$(".scroll-delete-active");0<h.length&&(h.addClass("scroll-delete-deactive"),setTimeout(function(){h.removeClass("scroll-delete-active").removeClass("scroll-delete-deactive")},1E3));g=$(g.target).parent().parent();g.addClass("scroll-delete-active");g.offset();g.removeAttr("onmouseover").removeAttr("onclick")}else{if(g=$(EWA_App.SECTION_SHOW).find("footer a.ft-item"),0!=g.length){var k=-1;g.each(function(p){-1==k&&this.className&&
0<this.className.indexOf("ft-item-cur")&&(k=1*p)});0>k||k==g.length-1||g[k+1].click()}}else if(0<this.distX){if(null!=g.target&&g.target.getAttribute("delete")){var l=$(g.target).parent().parent();if(l.hasClass("scroll-delete-active")){l.addClass("scroll-delete-deactive");setTimeout(function(){l.removeClass("scroll-delete-active").removeClass("scroll-delete-deactive")},1E3);return}}0<window.history.length&&window.history.back()}};a.IScrollMore&&(a.myScroll.gdxScrollEnd=function(g){a.myScroll&&a.myScroll.y&&
33<a.myScroll.y&&($(a.myScroll.wrapper).addClass("reloading"),setTimeout(function(){EWA_App.Section.reload()},333))},a.noMoreData=function(){return!1},a.myScroll._events.scroll.push(function(){if(a.myScroll&&a.myScroll.y&&-1!=a.myScroll.directionY){var g=a.myScroll.y-a.myScroll.maxScrollY;247>g&&100<g&&(EWA_App.DEBUG&&(console.log(a.myScroll),console.log("myScroll.loadMore: "+g)),EWA_App.Section.loadMore(!0))}}));EWA_App.MonitorResize.add(c,function(g,h){if(!a._is_reloadding){if(a.myScroll){if((a.myScrollLastTimer||
0)==h)return;a.myScrollLastTimer=h;a.myScroll.refresh();EWA_App.DEBUG&&console.log("scroll refresh("+a.ID+")")}a.RefreshAfter&&a.RefreshAfter(a)}})}},setWeiXinTitle:function(b){var a=$("body");document.title=b;var c=$('<iframe class="fack-weixin" width=0 style="display:none" height=0 src="about:blank"></iframe>');a.append(c);setTimeout(function(){c.remove()},1300)},setTitle:function(b,a){if(a=a||EWA_App.SECTION_SHOW){var c=__SECTIONS[a.id];c&&(c._title_old=b);$(a).find("header h1").text(b);document.title=
b;EWA_App.IS_IN_WEIXIN_MINI&&EWA_App.Section.setWeiXinTitle(document.title)}},ajaxLoadedAfter:function(b,a,c,d,e,f){var g=this;$(a).find(".EWA_TABLE");var h=this.getEWAS();c.Title?this.setTitle(c.Title):0<h.length&&this.setTitle(h[0].Title);(new EWA_UrlClass).GetParameter("EWA_APP_FROM_SECTION_ID");for(d=0;d<h.length;d++){var k=h[d];k.SECTION_CFG=c;k instanceof EWA_FrameClass?(this.frameUIAndEvents(k),window.EWA_CGI&&0<$(a).find(".ewa-ipt-droplist").length&&(EWA_App.DEBUG&&console.log("\u6e05\u9664EWA_CGI, "+
window.EWA_CGI),window.EWA_CGI=null)):k instanceof EWA_ListFrameClass&&this.listFrameUIAndEvents(k)}d=!1;(d=c.IScroll instanceof Function?c.IScroll(a):c.IScroll)&&!f?(EWA_App.IS_STOP_TOUCH_MOVE=!0,this.createIScroll(a,c)):(EWA_App.IS_STOP_TOUCH_MOVE=!1,$("#slider_bar").hide(),$(a).find(".content").css("overflow","auto"),$(a).find(".add-div").css("padding-bottom",50));g=this;$(a).attr("id");this.reShowFilter();$(a).find("a").each(function(){g.bindAEvent(this)});this.reShowRadios(a);c.Installed&&c.Installed(a);
f=$(a).find("footer");for(d=0;d<f.length;d++)c=f[d],0==d?"SECTION"!=c.parentNode.tagName&&$(a).append(c):$(c).remove();f=$(a).find("header");for(d=0;d<f.length;d++)c=f[d],0==d?"SECTION"!=c.parentNode.tagName&&$(a).prepend(c):$(c).remove();this.swapPage(b,a,e);this._is_ajax_loading=!1},frameDatePlaceHolder:function(b){var a=$(b),c=[];c.push(a.attr("onmousedown"));var d=a.attr("onblur");d&&c.push(d);var e=a.attr("ewa_tag");d="date";"datetime"==e?(d="datetime-local",b.value&&(e=(new EWA_DateClass(b.value)).FormatDateTime("yyyy-MM-dd").replace(" ",
"T"),EWA_App.DEBUG&&console.log(e),b.value=e,b.setAttribute("_formatdatetime_",e))):"time"==e?d="time":b.value&&(e=(new EWA_DateClass(b.value)).FormatDate("yyyy-MM-dd"),EWA_App.DEBUG&&console.log(e),b.value=e,b.setAttribute("_formatdate_",e));c={onchange:c.join(";"),type:d};a.removeAttr("readonly").removeAttr("onclick").removeAttr("onfocus").removeAttr("onkeydown").attr(c);c=a.attr("placeholder");d="ewa-date-placeholder";a.parent().hasClass("ewa-with-icon")&&(d+=" ewa-with-icon");e="";b.value&&(e=
" style='display: none' ");b=$("<div id='"+EWA_Utils.tempId()+"' class='"+d+"' "+e+"></div>");b.text(c);c=a.parentsUntil("tr").last();c.css("position","relative");c.append(b);a.attr("_placeholder_id",b.attr("id"));a.on("change keyup",function(){this.value?$("#"+this.getAttribute("_placeholder_id")).hide():$("#"+this.getAttribute("_placeholder_id")).show()})},frameUIAndEvents:function(b){var a=this,c=b.SECTION_CFG,d=$('section[id="'+b.SECTION_CFG.ID+'"]'),e=d.find("#EWA_FRAME_"+b._Id);b.H5Type();var f=
(new EWA_UrlClass).GetParameter("EWA_APP_FROM_SECTION_ID"),g=__SECTIONS[f];f&&(EWA_App.DEBUG&&console.log("EWA.F.FOS['"+b._Id+"'].ReloadAfter ("+f+")"),b.ReloadAfter&&(b._App_ReloadAfter=b.ReloadAfter),b.ReloadAfter=function(){b._App_ReloadAfter&&b._App_ReloadAfter();g.RefreshBackAction=!0;setTimeout(function(){g.RefreshBackAction=!1},500);EWA_App.back()});e.find('div[tag="REPT"]').each(function(){$(this).attr("onmousedown",null)});setTimeout(function(){e.find("textarea").each(function(){var h=$(this);
h.attr("notautosize")||h.attr("aa")||(autoTextarea(this),h.attr("aa","aa"));if(EWA_App.IS_IN_WEIXIN)h.on("blur",function(){window.scroll(0,0)})})},200);e.find(".EWA_INPUT").each(function(){var h=$(this);if(EWA_App.IS_IN_WEIXIN&&"file"!=this.type&&"radio"!=this.type&&"checkbox"!=!this.type&&"submit"!=!this.type&&"button"!=this.type&&"image"!=this.type)h.on("blur",function(){window.scroll(0,0)});if(h.hasClass("ewa-ipt-date")||"time"==h.attr("ewa_tag"))a.frameDatePlaceHolder(this);else{h.hasClass("ewa-ipt-droplist")&&
(h.attr("oninput1",h.attr("oninput")),h.attr("onkeyup1",h.attr("onkeyup")),h.attr("readonly","readonly"),h.attr("onmousedown","createDDL(this)"),h.removeAttr("onkeyup"),h.removeAttr("oninput"));var k=b.ItemList.GetItem(this.id);k&&(k=$(k).find("DataItem Set").attr("DataType"),"Int"===k||"Number"===k?h.attr("type","tel"):"Number"===k&&h.attr("type","number"))}});c.ButtonOnFooter&&this.buttonOnFooter(d);EWA.B.IS_ANDROID&&e.find("input[type=file]").each(function(){$(this).attr("accept","image/*").removeAttr("multiple")})},
listFrameUIAndEvents:function(b){var a=b.SECTION_CFG,c=b.SECTION_CFG.ID,d=$('section[id="'+c+'"]'),e=d.find("[id=EWA_LF_"+b.Id+"]");e.find(".ewa-lf-data-row").each(function(){$(this).attr("onclick",$(this).attr("onmousedown"));$(this).attr("onmousedown",null)});var f=e.find('input[ewa_tag="butFlow"]'),g=!0;0==f.length&&(f=e.find(".ewa-lf-data-row #butModify"),g=!1);var h=this;f.each(function(){var k=h.convertButtonToAnchor(this,g,c);k&&($(this).hide(),$(this).parent().append(k).addClass("ewa-col-A").removeAttr("style"))});
e.find('input[id="butDelete"]').each(function(){$(this).parent().addClass("scroll-delete").removeAttr("style");$(this).parent().parent().find(".ewa-col-A a").attr("delete","delete");EWA.UI.Msg.IS_IN_APP||(EWA.UI.Msg.IS_IN_APP=!0)});e.find("a").each(function(){h.bindAEvent(this)});"Y"==a.SHOW_LF_MENUS&&this.listFrameSetUpBottomMenu(e,b);"Y"==a.SHOW_ORDERS&&(e=this.showOrders(),d.find(".ewa-lf-search .ewa-lf-header").remove(),d.find(".ewa-lf-search").append(e));"Y"!=a.USE_EWA_LF&&!0!==a.USE_EWA_LF||
"Y"==a.IScrollMore||h.moveSplitToFooter();b.ReloadAfterApp=function(){EWA_App.DEBUG&&(console.log("\u89e6\u53d1 ewa \u7684 ReloadAfterApp"),console.log(b));a._ewa_load_more_obj=null;h.listFrameUIAndEvents(b);a.myScroll&&(h.lazyload(a.myScroll),a.myScroll.scrollTo(0,0,100))};a._is_reloadding=!1},listFrameSetUpBottomMenu:function(b,a){var c="<td class='ewa-col-A'><a onclick='EWA_App.Section.showLfMenus(this,\""+a.Id+"\");' class='show-lf-menus'></a></td>";$(b).find("tr.ewa-lf-data-row").each(function(){$(this).attr("SHOW_LF_MENUS")||
$(this).append(c).attr("SHOW_LF_MENUS",1)})},convertButtonToAnchor:function(b,a,c){return(b=$(b).attr("onclick"))&&0<=b.indexOf("EWA.UI.Dialog.OpenReloadClose")?(b=b.replace("EWA.UI.Dialog.OpenReloadClose","EWA_App.Section.fake_EWA_UI_Dialog_OpenReloadClose"),a=eval(b)+"&EWA_APP_FROM_SECTION_ID="+c+(a?"&isflow=1":""),c=$("<a convertButtonToAnchor='1' class='ewa-anchor'></a>"),c.attr("href",a),c):null},fake_EWA_UI_Dialog_OpenReloadClose:function(b,a,c,d,e,f,g){d=EWA_App.SECTION_SHOW&&"ewa"==EWA_App.SECTION_SHOW.id?
"ewa1":"ewa";"ewa1"!=d||__SECTIONS[d]||(__SECTIONS[d]=__SECTIONS.ewa);if(0<c.toUpperCase().indexOf(".LF.")||0<c.toUpperCase().indexOf(".LISTFRAME."))d=EWA_App.SECTION_SHOW&&"ewa_lf"==EWA_App.SECTION_SHOW.id?"ewa_lf1":"ewa_lf","ewa_lf1"!=d||__SECTIONS[d]||(__SECTIONS[d]=__SECTIONS.ewa_lf);if("yes"==g&&EWA.F&&EWA.F.FOS[b]&&EWA.F.FOS[b].Url){b=new EWA_UrlClass(EWA.F.FOS[b].Url);b.RemoveEwa();g=new EWA_UrlClass("a1?"+e);for(var h in g._Paras)e=g.GetParameter(h),b.AddParameter(h,e);e=b.GetParas()}return(window.location.href.split("#")[0]+
"#"+d+"?xmlname="+a+"&itemname="+c+"&"+e+"&EWA_AJAX=INSTALL").replace(/\|/ig,"%7c")},buttonOnFooter:function(b){b=b?$(b):$(EWA_App.SECTION_SHOW);b.find("#butClose").remove();var a=b.find(".EWA_FRAME_GROUP_BUTTONS"),c=!1;if(0==a.length)var d=b.find(".EWA_TD_B input,.EWA_TD_B button");else d=a.find("input"),a.hide(),c=!0;b.find(".EWA_TD_B").hide();var e=b.find("footer"),f=100/d.length;e.html("");var g=b.find("form").attr("id");b.find("form").append('<div class="ewa-app-bottom-append" ></div>');d.each(function(h){var k=
document.createElement("input");k.id="butOk";k.value=this.value||this.innerHTML;k.type="button";k.style.width=f+"%";k.style.left=f*h+"%";k.style.display="block";0<h&&(k.style.borderLeft="1px solid #fff");0==c&&"submit"==this.type?k.setAttribute("onclick","$X('"+g+"').onsubmit();"):(h=c?this.id:EWA_Utils.tempId("ref_but_"),c||(this.id=h),k.setAttribute("rid",h),k.setAttribute("onclick","EWA_App.Section.footerButtonRelate(this);"),("none"==this.style.display||this.disabled)&&k.setAttribute("disabled",
"disabled"));e.append(k)})},footerButtonRelate:function(b){var a=$(b).attr("rid"),c=$X(a);null==c?console.log("\u4e0d\u80fd\u627e\u5230 ref_obj id="+a):(c.onclick(),$(b).parent().find("input").each(function(){var d=$(this).attr("rid"),e=$X(d);null==e?console.log("\u4e0d\u80fd\u627e\u5230 ref_obj id="+d):(this.value=e.value,"none"==e.style.display||e.disabled?this.setAttribute("disabled","disabled"):this.removeAttribute("disabled"))}))},bindAEvents:function(b){var a=this;$(b||EWA_App.SECTION_SHOW).find("a").each(function(){a.bindAEvent(this)})},
bindAEvent:function(b){b=$(b);if(!b.attr("ckjs")){var a=this,c=b.attr("href");!c||0>c.indexOf("#")||(b[0].addEventListener("click",function(d){a.handleAClick(this,d);return!1},!1),b.attr("ckjs","g"))}},handleAClick:function(b,a){a&&(a.stopPropagation(),a.preventDefault());a=(new Date).getTime();var c=$(b).attr("t");$(b).attr("t",a);if(!(c&&144>a-c)){var d=b.href;if(!(null==d||0>d.indexOf("#"))){a=EWA_App.Section.getParas(d);if(a.section_id&&EWA_App.State.prevShow==$("section[id="+a.section_id+"]")[0])return!1;
var e=b.innerText.trim();$(b).addClass("act");d=EWA_App.ENTRY_URL+"#"+d.split("#")[1];EWA_App.DEBUG&&console.log(d);var f=(new EWA_UrlClass(d)).GetParameter("EWA_APP_SECTION_REPLACE");EWA_App.DEBUG&&console.log(f);EWA_App.handleAClickBefore?EWA_App.handleAClickBefore(a,d,e,function(){EWA_App.State.state(e,d,!1,f)}):setTimeout(function(){EWA_App.State.state(e,d,!1,f)},10);setTimeout(function(){$(b).removeClass("act")},500)}}},showLargeAddButton:function(b,a){var c=$(EWA_App.SECTION_SHOW),d=c.find(".ewa-grid-frame"),
e=c.find(".ewa-lf-frame");if(0<d.length){if(0<d.find(".ewa_grid_li").length)return;d=d.parent()}else if(0<e.length){if(0<e.find(".ewa-lf-data-row").length)return;d=e.parent()}else return;var f=$('<a class="ewa-app-large-add-btn"></a>');b||="enus"==EWA.LANG?"Publish your work and let more people know about you":"\u53d1\u8868\u60a8\u7684\u4f5c\u54c1\uff0c\u8ba9\u66f4\u591a\u7684\u4eba\u4e86\u89e3\u60a8\u3002";f.text(b);d.html("").append(f);if(a)f[0].onclick=function(){a(this)};else{var g=this;setTimeout(function(){var h=
c.find(".ewa-app-btn-add a").attr("href");f.attr("href",h);g.bindAEvent(f[0])},444)}},showBtnAdd:function(b,a){b=$(b).find(".ewa-app-btn-add");b.html("<a></a>");b.show();a&&(b.find("a").attr("href",a),this.bindAEvent(b.find("a")[0]));return b},hideBtnAdd:function(b){b=$(b).find(".ewa-app-btn-add");b.hide();return b},swapPage:function(b,a,c){var d=$(b).attr("id"),e=$(a).attr("id"),f=__SECTIONS[e],g=__SECTIONS[d];if(d==e){if(f.ShowCompleted)try{f.ShowCompleted(a,b)}catch(m){console.log(f.ShowCompleted,
m)}this.hideCoverDiv()}else{EWA_App.DEBUG&&console.log("swapPage",b,a,c);if(f.ShowPlusButton){d=(new EWA_UrlClass).GetParas();var h=f.ShowPlusButton;d&&(h=h+"&"+d);this.showBtnAdd(a,h+("&EWA_APP_FROM_SECTION_ID="+e))}else{var k=null;if(0==e.indexOf("ewa")||"Y"==f.SHOW_LF_ADD)d=$("section#"+e+" .ewa_lf_func"),d.find("input[type=button]").each(function(){var m=$(this).attr("res");m&&0<m.indexOf("butAdd")&&(k=$(this).attr("onclick"))}),k||=d.find(".ewa_lf_func_dact[ewa_click]:eq(0)").attr("ewa_click");
EWA_App.DEBUG&&(console.log("\u6dfb\u52a0\u6309\u94ae"),console.log(k));k?this.showBtnAdd(a).find("a").attr("onclick",k):this.hideBtnAdd(a)}g&&(g.Losted&&g.Losted(b),!g.Refresh&&g.myScroll&&(g.myScroll.___x=g.myScroll.x,g.myScroll.___y=g.myScroll.y));$(a).find("footer a.ft-item").each(function(){$(this).removeClass("ft-item-cur");$(this).attr("href").split("?")[0]=="#"+e&&$(this).addClass("ft-item-cur")});c&&EWA_App.IS_IN_WEIXIN&&(d=f._title_old||f.Title,document.title=d,this.setWeiXinTitle(d));if(f&&
"direct"==f.swap)EWA_App.DEBUG&&console.log(f.swap),$(b).hide(),$(a).css("display","flex"),$(a).css("-webkit-transform","translate3d(0,0,0)"),f.swap="",this.showCompleted(b,c);else{var l=EWA_App.Ani.getCss(c?g.swap:f.swap);c?$(a).css(l.INIT_BACK):$(a).css(l.INIT);$(a).css("display","flex");!f.Refresh&&f.myScroll&&f.myScroll.___y&&(EWA_App.DEBUG&&console.log(f.myScroll.___x,f.myScroll.___y),f.myScroll.scrollTo(f.myScroll.___x,f.myScroll.___y,0));var p=this;setTimeout(function(){c?($(b).css(l.BACK_HIDE),
$(a).css(l.BACK_SHOW),EWA_App.DEBUG&&console.log(b,a),EWA_App.DEBUG&&console.log(l.BACK_HIDE,l.BACK_SHOW)):($(b).css(l.HIDE),$(a).css(l.SHOW));setTimeout(function(){"pop"!=f.swap&&($(b).css({"-webkit-transform":"","-webkit-transition":""}),$(b).hide());if(f.ShowCompleted)try{f.ShowCompleted(a,b)}catch(r){console.log(f.ShowCompleted,r)}if(f.InitScrollToElement){var m=$(f.InitScrollToElement);0==m.length?EWA_App.DEBUG&&console.log("showCfg.InitScrollToElement none"):f.myScroll.scrollToElement(m[0],
f.InitScrollToElementTimer||0);f.InitScrollToElementTimer=null;f.InitScrollToElement=null}p.showCompleted(b,c)},500)},1)}}},showCompleted:function(b,a){this.hideCoverDiv();b=$(b).attr("id");var c=__SECTIONS[b];if(c){var d=!1;a?c.Refresh&&(d=!0):c.RefreshBackAction&&(d=!0);d&&(EWA_App.DEBUG&&console.log("showCompleted ("+b+") -> clear content!"),c.myScroll&&(c.myScroll.destroy(),delete c.myScroll,c.myScroll=null),$("section#"+b).remove())}},moveSplitToFooter:function(){var b=$(EWA_App.SECTION_SHOW),
a=b.find("footer");if(0!=a.length&&!__SECTIONS[b.attr("id")].IScrollMore){var c=b.find(".ewa-lf-frame").attr("id");if(c&&EWA.F.FOS[c.replace("EWA_LF_","")]){c=a.attr("rid");c||(c=EWA_Utils.tempId("_rid_"),a.attr("rid",c));var d=b.find(".content .ewa-lf-frame-split");0<d.length&&d.attr("rid1")!=c&&(d.attr("rid1",c),a.html("").append(d),a=d.find("td:eq(0) b:last()").text())&&(a="<span class='records'> ("+a+")</span>",b.find("header h1 .records").remove(),b.find("header h1").append(a))}}}};
EWA_App.State={stack:[],inc:0,init:function(b){this.state(document.title,window.location.href,!0);this.stateListen();this.initUrl=window.location.href;this.prevShow=this.initSection=$('section[id="'+b+'"]')[0];$("a").each(function(){var a=this.href;!a||0<=a.toLowerCase().indexOf("javascript")||0>a.indexOf("#")||EWA_App.Section.bindAEvent(this)})},state:function(b,a,c,d){if(window.history.pushState){this.inc++;var e={title:b,url:a,inc:this.inc},f=e.title+"/"+e.url;if(this.___last_==f){EWA_App.DEBUG&&
console.log("none-push",this.___last_);return}this.___last_=f;var g=this;setTimeout(function(){g.___last_=null},444);EWA_App.DEBUG&&console.log("push",e);EWA_App.State._is_replace||d?(window.history.replaceState(e,b,a),EWA_App.State._is_replace=!1,this.stack[this.stack.length-1]=a):(window.history.pushState(e,b,a),this.stack.push(a));c||EWA_App.Section.handleState(e)}else alert("brower not support history.pushState");document.title=b},stateListen:function(){var b=this;window.addEventListener("popstate",
function(a){EWA_App.DEBUG&&console.log("popstate",a);var c=b.stack.pop();0==b.stack.length?(EWA_App.DEBUG&&console.log("\u5730\u5740\u5806\u6808\u4e3a\u7a7a\u4e86\uff0c\u91cd\u65b0\u5c06\u7b2c\u4e00\u9875\u5165\u6808"),b.state("",c,!0)):a.state&&(a.state._is_back=!0,EWA_App.Section.handleState(a.state))},!1)}};EWA.UI.Dialog.OpenReloadCloseOld=EWA.UI.Dialog.OpenReloadClose;
EWA.UI.Dialog.OpenReloadClose=function(b,a,c,d,e){b=EWA_App.Section.fake_EWA_UI_Dialog_OpenReloadClose(b,a,c,d,e);b+="&EWA_APP_FROM_SECTION_ID="+EWA_App.SECTION_SHOW.id;EWA_App.DEBUG&&console.log(b);EWA_App.State.state(null,b)};function $X(b){if(EWA_App.SECTION_SHOW&&EWA_App.SECTION_SHOW.id){var a=$("section#"+EWA_App.SECTION_SHOW.id+' [id="'+b+'"]');return 0==a.length?document.getElementById(b):a[0]}return document.getElementById(b)}
EWA_Utils.JsRegisterSrc=function(b,a){var c="ewa_js_register_"+b.hashCode();if($X(c)){if(a){console.log("skip-js: "+b);return}if(b.endsWith(".js")){console.log("skip-js: "+b);return}}a||b.endsWith(".js")||!EWA_App.SECTION_SHOW?a=document.getElementsByTagName("head")[0]:(a=$(EWA_App.SECTION_SHOW).find("div.js-registers"),0==a.length&&(a=$("<div class='js-registers'></div>"),$(EWA_App.SECTION_SHOW).find("div.content:eq(0)").append(a)),a=a[0]);var d=document.createElement("script");d.type="text/javascript";
d.language="javascript";d.id=c;try{d.src=b,a.appendChild(d)}catch(e){alert(e)}};EWA_Utils.JsRegister=function(b){if(EWA_App.SECTION_SHOW){var a=$(EWA_App.SECTION_SHOW).find("div.js-registers");0==a.length&&(a=$("<div class='js-registers'></div>"),$(EWA_App.SECTION_SHOW).find("div.content:eq(0)").append(a));a=a[0]}else a=document.getElementsByTagName("head")[0];var c=document.createElement("script");c.type="text/javascript";c.language="javascript";try{c.text=b,a.appendChild(c)}catch(d){alert(d)}};
function EWA_UrlClass(b){this._URL="";this._Paras={};this._Root="";this.SetUrl=function(a){this._URL=a;this._Paras={};var c=a.split("?");this._Root=c[0];if(!(0>a.indexOf("?")))for(ia=1;ia<c.length;ia++){a=c[ia].split("&");for(var d=0;d<a.length;d++){var e=a[d].split("="),f=e[0].toUpperCase(),g="";2==e.length&&(g=e[1],0<g.indexOf("#")&&(g=g.split("#")[0]));this._Paras[f]=g}}};this.GetParameter=function(a){return this._Paras[a.toUpperCase().trim()]};this.GetParas=function(a){var c=[],d;for(d in this._Paras){var e=
this._Paras[d];a&&(d=d.toLowerCase());null!=e&&c.push(d+"="+e)}return c.join("&")};this.SetRoot=function(a){this._Root=a};this.GetUrl=function(a){a=this.GetParas(a);var c="";0<a.length&&(c=0<=this._Root.indexOf("?")?"&":"?");return this._Root+c+a};this.AddParameter=function(a,c,d){a=a.toUpperCase().trim();this._Paras[a]=d?c:encodeURIComponent(c);return this.GetUrl()};this.RemoveParameter=function(a){a=a.toUpperCase().trim();this._Paras[a]=null;return this.GetUrl()};this.RemoveEwa=function(){for(var a in this._Paras)"XMLNAME"!=
a.toUpperCase()&&"ITEMNAME"!=a.toUpperCase()&&0!=a.toUpperCase().indexOf("EWA_")||this.RemoveParameter(a)};this.SetUrl(b||document.location.href)}function $U(b){var a=new EWA_UrlClass;a.RemoveEwa();var c=[],d;for(d in a._Paras){var e=a._Paras[d];b&&(d=d.toLowerCase());null!=e&&(0<e.indexOf("#")&&(e=e.split("#")[0]),c.push(d+"="+e))}return c.join("&")}
function EWA_FrameShowAlert(b,a){if(1!=b.getAttribute("show_alert")){b.setAttribute("show_alert",1);var c=b;do if(c=c.parentNode,"BODY"==c.tagName){c=null;break}while("TR"!=c.tagName||1!=c.getAttribute("SHOW_MSG"));if(c){for(var d=b=0;d<c.cells.length;d++){var e=c.cells[d];"none"!=e.style.display&&(b+=e.colSpan)}d=$(c);var f=d.next();f.attr("error")||(c=c.parentNode.insertRow(c.rowIndex+1),c.setAttribute("error",1),e=c.insertCell(-1),e.colSpan=b,e.className="ewa-tip-error",f=$(c),e.innerHTML='<div class="ewa-tip-error-info"></div>');
d.find("td").addClass("ewa-tip-error");f.find(".ewa-tip-error-info").html(a)}else a=$(b),a.attr("ori_bc",a.css("background-color")),a.css("background-color","pink"),b.focus()}}
function EWA_FrameRemoveAlert(b){if(1==b.getAttribute("show_alert")){b.setAttribute("show_alert",0);var a=b;do if(a=a.parentNode,"BODY"==a.tagName){a=null;break}while("TR"!=a.tagName||1!=a.getAttribute("SHOW_MSG"));a?(b=$(a),b.find("td").removeClass("ewa-tip-error"),b=b.next(),b.attr("error")&&b.remove()):(b=$(b),b.css("background-color",b.attr("ori_bc")))}}
EWA_App.showFrameAsMobile=b=>{let a="SECTION_"+(b.Id||b._Id);if(!window.__SECTIONS||!__SECTIONS[a])if(0<window.location.href.indexOf("#"+a))window.location.href=window.location.href.split("#")[0];else{var c=new EWA_UrlClass(b.Url);c.AddParameter("EWA_AJAX","INSTALL");c.AddParameter("EWA_APP","1");c=c.GetUrl();c=b.appCfg||{ID:a,IScroll:"Y",IScrollMore:"Y",PageFooter:"N",PageHeader:"Y",Refresh:"N",USE_EWA_LF:"Y",RE_SHOW_LF_FILTER:"Y",SHOW_LF_MENUS:"Y",SHOW_ORDERS:"Y",SHOW_LF_ADD:"Y",EWA:!1,U:c,loaded:!0,
swap:"direct",Title:b.Title};b instanceof EWA_FrameClass&&!b.appCfg&&(c.PageFooter="Y",c.ButtonOnFooter="Y",c.USE_EWA_LF="N",c.RE_SHOW_LF_FILTER="N",c.SHOW_LF_MENUS="N",c.SHOW_ORDERS="N",c.SHOW_LF_ADD="N",c.IScrollMore="N");var d={ButtonOnFooter:"Y",Css:"ewa",EWA:!0,ID:"ewa",IScroll:!0,IScrollMore:!1,PageFooter:"Y",PageHeader:"Y",Refresh:"Y",RE_SHOW_LF_FILTER:"Y",U:EWA.CP+"/EWA_STYLE/cgi-bin/index.jsp",USE_EWA_LF:"Y"},e=[];e.push(c);e.push(d);EWA_App.initCfgs(e);EWA_App.start(a);b.SECTION_CFG=__SECTIONS[a];
b instanceof EWA_FrameClass?(EWA_App.Section.buttonOnFooter(),EWA_App.Section.frameUIAndEvents(b)):(EWA_App.Section.reShowFilter(),EWA_App.Section.listFrameUIAndEvents(b))}};
function createDDL(b){window.__createDDL=b;var a=$X("___ewa_ddl");a||(window._EWA_UI_DIALOG_COVERINDEX=1231,a=document.createElement("div"),a.id="___ewa_ddl",a.className="ewa-ddl-box ewa-frame",a.innerHTML="<div class='ewa-ddl-box-content'></div><i onclick='closeDDL1()' class='fa fa-close'></i>",document.body.appendChild(a));a=$("#___ewa_ddl");b=$(b).parent().html();a.find(".ewa-ddl-box-content").html(b);var c=a.find("input:eq(0)");b=a.find("input:eq(1)");c.attr("oninput",c.attr("oninput1")).attr("onkeyup",
c.attr("onkeyup1"));c.attr("onmousedown",null);c.attr("readonly",null);c.attr("id","_create_ddl_from_"+b.attr("id"));c.attr("onkeypress","ddlKeyPress(this)");a.find("input:eq(1)").attr("afterEvent","closeDDL");$("body").append(a);a.show();setTimeout(function(){c[0].focus()},500)}function ddlKeyPress(b){setTimeout(function(){b.setAttribute("have",b.value)},11)}
function closeDDL(b,a,c,d){if(""!=b){$(".ewa-ddl-list").hide();var e=$(window.__createDDL);e.val($("#___ewa_ddl input:eq(0)").val());e.next().val($("#___ewa_ddl input:eq(1)").val());e.next().attr("afterEvent")&&eval(e.next().attr("afterEvent"))(b,a,c,d);$("#___ewa_ddl").hide();window.__createDDL=null}}function closeDDL1(){var b=$(window.__createDDL);b.val("");b.next().val("");$("#___ewa_ddl").hide();window.__createDDL=null}
var autoTextarea=function(b,a,c){a=a||0;window.opera&&window.opera.toString().indexOf("Opera");var d=function(h,k){b.addEventListener?b.addEventListener(h,k,!1):b.attachEvent("on"+h,k)},e=function(h){return b.currentStyle?b.currentStyle[h]:getComputedStyle(b,null)[h]},f=parseFloat(function(h){var k=e(h);"height"===h&&1!==k.search(/px/i)&&(h=b.getBoundingClientRect(),k=h.bottom-h.top-parseFloat(e("paddingTop"))-parseFloat(e("paddingBottom"))+"px");console.log(k);return k}("height"));b.style.resize=
"none";var g=function(){var h=b.style;if(b._length!==b.value.length){b._length=b.value.length;var k=document.body.scrollTop||document.documentElement.scrollTop;b.style.height=f+"px";if(b.scrollHeight>f){if(c&&b.scrollHeight>c){var l=c-0;h.overflowY="auto"}else l=b.scrollHeight-0,h.overflowY="hidden";h.height=l+a+"px";k+=parseInt(h.height)-b.currHeight;document.body.scrollTop=k;document.documentElement.scrollTop=k;b.currHeight=parseInt(h.height)}}};d("propertychange",g);d("input",g);d("focus",g);g()};
//# sourceMappingURL=/EmpScriptV2/EWA_STYLE/app2/js/app2.min.js.map
